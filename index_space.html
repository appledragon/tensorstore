<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=_static/logo.svg><title>Index space - TensorStore</title><link rel=stylesheet href=_static/stylesheets/main.css><link rel=stylesheet href=_static/stylesheets/palette.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>
          :root {
            --md-text-font-family: "Roboto";
            --md-code-font-family: "Roboto Mono";
          }
        </style></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=green data-md-color-accent=light-blue> <script>

  /* Prepend the base path to the given key to ensure uniqueness */
  function __prefix(key) {
    var prefix = new URL(".", location)
    return prefix.pathname + "." + key
  }

  /* Fetch the given key from the given storage */
  function __get(key, storage = localStorage) {
    return JSON.parse(storage.getItem(__prefix(key)))
  }
</script> <script>
  var palette = __get("__palette")
  if (palette !== null && typeof palette.color === "object")
    for (var key in palette.color)
      document.body.setAttribute("data-md-color-" + key, palette.color[key])
</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=index.html title=TensorStore class="md-header__button md-logo" aria-label=TensorStore data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 132.0 132.0"><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=2.0 x2=130.8 y2=2.0 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=16.2 x2=130.8 y2=16.2 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=30.4 x2=130.8 y2=30.4 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=44.7 x2=130.8 y2=44.7 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=58.9 x2=130.8 y2=58.9 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=73.1 x2=130.8 y2=73.1 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=87.3 x2=130.8 y2=87.3 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=101.6 x2=130.8 y2=101.6 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=115.8 x2=130.8 y2=115.8 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=130.0 x2=130.8 y2=130.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=2.0 y2=130.0 x2=2.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=16.2 y2=130.0 x2=16.2 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=30.4 y2=130.0 x2=30.4 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=44.7 y2=130.0 x2=44.7 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=58.9 y2=130.0 x2=58.9 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=73.1 y2=130.0 x2=73.1 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=87.3 y2=130.0 x2=87.3 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=101.6 y2=130.0 x2=101.6 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=115.8 y2=130.0 x2=115.8 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=130.0 y2=130.0 x2=130.0 /><rect fill=currentColor x=3.5 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=17.7 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=46.2 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=17.7 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=117.3 width=11.2 height=11.2 /></svg> </a> <label class="md-header__button md-icon" for=__drawer> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-menu width=24 height=24 viewbox="0 0 24 24"><path d=M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z /></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> TensorStore </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Index space </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=green data-md-color-accent=light-blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_2 hidden> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-lightbulb width=24 height=24 viewbox="0 0 24 24"><path d="M12,2A7,7 0 0,0 5,9C5,11.38 6.19,13.47 8,14.74V17A1,1 0 0,0 9,18H15A1,1 0 0,0 16,17V14.74C17.81,13.47 19,11.38 19,9A7,7 0 0,0 12,2M9,21A1,1 0 0,0 10,22H14A1,1 0 0,0 15,21V20H9V21Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=light-blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-lightbulb-outline width=24 height=24 viewbox="0 0 24 24"><path d="M12,2A7,7 0 0,1 19,9C19,11.38 17.81,13.47 16,14.74V17A1,1 0 0,1 15,18H9A1,1 0 0,1 8,17V14.74C6.19,13.47 5,11.38 5,9A7,7 0 0,1 12,2M9,21V20H15V21A1,1 0 0,1 14,22H10A1,1 0 0,1 9,21M12,4A5,5 0 0,0 7,9C7,11.05 8.23,12.81 10,13.58V16H14V13.58C15.77,12.81 17,11.05 17,9A5,5 0 0,0 12,4Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-magnify width=24 height=24 viewbox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-magnify width=24 height=24 viewbox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-left width=24 height=24 viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-close width=24 height=24 viewbox="0 0 24 24"><path d=M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z /></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/google/tensorstore/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> google/tensorstore </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=index.html title=TensorStore class="md-nav__button md-logo" aria-label=TensorStore data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 132.0 132.0"><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=2.0 x2=130.8 y2=2.0 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=16.2 x2=130.8 y2=16.2 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=30.4 x2=130.8 y2=30.4 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=44.7 x2=130.8 y2=44.7 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=58.9 x2=130.8 y2=58.9 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=73.1 x2=130.8 y2=73.1 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=87.3 x2=130.8 y2=87.3 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=101.6 x2=130.8 y2=101.6 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=115.8 x2=130.8 y2=115.8 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=130.0 x2=130.8 y2=130.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=2.0 y2=130.0 x2=2.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=16.2 y2=130.0 x2=16.2 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=30.4 y2=130.0 x2=30.4 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=44.7 y2=130.0 x2=44.7 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=58.9 y2=130.0 x2=58.9 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=73.1 y2=130.0 x2=73.1 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=87.3 y2=130.0 x2=87.3 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=101.6 y2=130.0 x2=101.6 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=115.8 y2=130.0 x2=115.8 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=130.0 y2=130.0 x2=130.0 /><rect fill=currentColor x=3.5 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=17.7 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=46.2 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=17.7 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=117.3 width=11.2 height=11.2 /></svg> </a> TensorStore </label> <div class=md-nav__source> <a href=https://github.com/google/tensorstore/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> google/tensorstore </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 data-md-state=indeterminate type=checkbox id=__nav_1 checked> <label class=md-nav__link for=__nav_1> <a class href=python/tutorial.html>Python API</a> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Python API" data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Python API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=python/tutorial.html class=md-nav__link> Tutorial </a> </li> <li class=md-nav__item> <a href=python/indexing.html class=md-nav__link> Indexing </a> </li> <li class=md-nav__item> <a href=python/api/index.html class=md-nav__link> API reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 data-md-state=indeterminate type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> <a class href=installation.html>Setup</a> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Setup data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=installation.html class=md-nav__link> Building and Installing </a> </li> <li class=md-nav__item> <a href=environment.html class=md-nav__link> Environment variables </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> <a class href=spec.html>JSON</a> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=JSON data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> JSON </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=spec.html class=md-nav__link> JSON Spec </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Index space <span class="md-nav__icon md-icon"></span> </label> <a href class="md-nav__link md-nav__link--active"> Index space </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Index space </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#index-domain class=md-nav__link> Index domain </a> <nav class=md-nav aria-label="Index domain"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-IndexDomain class=md-nav__link> <span aria-label="JSON type" class="objinfo-icon objinfo-icon__data" title="JSON type">J</span><span title="IndexDomain (JSON type)">IndexDomain</span> </a> <nav class=md-nav aria-label=IndexDomain> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-IndexDomain.rank class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.rank (JSON member) — Number of dimensions.">rank</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexDomain.inclusive_min class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.inclusive_min (JSON member) — Inclusive lower bounds of the domain.">inclusive_min</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexDomain.exclusive_max class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.exclusive_max (JSON member) — Exclusive upper bounds of the domain.">exclusive_max</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexDomain.inclusive_max class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.inclusive_max (JSON member) — Inclusive upper bounds of the domain.">inclusive_max</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexDomain.shape class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.shape (JSON member) — Extent of each dimension of the domain.">shape</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexDomain.labels class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.labels (JSON member) — Dimension labels for each dimension.">labels</span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#index-transform class=md-nav__link> Index transform </a> <nav class=md-nav aria-label="Index transform"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-IndexTransform class=md-nav__link> <span aria-label="JSON type" class="objinfo-icon objinfo-icon__data" title="JSON type">J</span><span title="IndexTransform (JSON type)">IndexTransform</span> </a> <nav class=md-nav aria-label=IndexTransform> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-IndexTransform.input_rank class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_rank (JSON member) — Number of input dimensions.">input_rank</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.input_inclusive_min class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_inclusive_min (JSON member) — Inclusive lower bounds of the input domain.">input_inclusive_min</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.input_exclusive_max class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_exclusive_max (JSON member) — Exclusive upper bounds of the input domain.">input_exclusive_max</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.input_inclusive_max class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_inclusive_max (JSON member) — Inclusive upper bounds of the input domain.">input_inclusive_max</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.input_shape class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_shape (JSON member) — Extent of each dimension of the input domain.">input_shape</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.input_labels class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_labels (JSON member) — Dimension labels for each input domain dimension.">input_labels</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.output class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.output (JSON member) — Specifies the output index map for each output dimension.">output</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#json-OutputIndexMap class=md-nav__link> <span aria-label="JSON type" class="objinfo-icon objinfo-icon__data" title="JSON type">J</span><span title="OutputIndexMap (JSON type) — Specifies a transform from an input space to a single output index.">OutputIndexMap</span> </a> <nav class=md-nav aria-label=OutputIndexMap> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-OutputIndexMap.offset class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="OutputIndexMap.offset (JSON member) — Specifies an offset for this output dimension.  If neither
input_dimension nor index_array is
specified, this specifies the constant value to which this output
dimension maps.">offset</span> </a> </li> <li class=md-nav__item> <a href=#json-OutputIndexMap.stride class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="OutputIndexMap.stride (JSON member) — Multiplier for the input index specified by
input_dimension or the index array value specified by
index_array.">stride</span> </a> </li> <li class=md-nav__item> <a href=#json-OutputIndexMap.input_dimension class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="OutputIndexMap.input_dimension (JSON member) — If present, indicates that this output dimension uses a single
input dimension map with the specified input dimension.  Must not
be specified in conjunction with index_array.">input_dimension</span> </a> </li> <li class=md-nav__item> <a href=#json-OutputIndexMap.index_array class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="OutputIndexMap.index_array (JSON member) — If present, indicates that this output dimension uses an index
array map, with the index array specified as a nested list of rank
equal to the input_rank.">index_array</span> </a> </li> <li class=md-nav__item> <a href=#json-OutputIndexMap.index_array_bounds class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="OutputIndexMap.index_array_bounds (JSON member)">index_array_bounds</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#json-IndexInterval class=md-nav__link> <span aria-label="JSON type" class="objinfo-icon objinfo-icon__data" title="JSON type">J</span><span title="IndexInterval (JSON type) — Specifies a closed interval of integer index values.">IndexInterval</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#alignment-and-broadcasting class=md-nav__link> Alignment and broadcasting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=schema.html class=md-nav__link> Schema </a> </li> <li class=md-nav__item> <a href=context.html class=md-nav__link> Context framework </a> </li> <li class=md-nav__item> <a href=driver/index.html class=md-nav__link> Drivers </a> </li> <li class=md-nav__item> <a href=kvstore/index.html class=md-nav__link> Key-Value Storage Layer </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Index space </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#index-domain class=md-nav__link> Index domain </a> <nav class=md-nav aria-label="Index domain"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-IndexDomain class=md-nav__link> <span aria-label="JSON type" class="objinfo-icon objinfo-icon__data" title="JSON type">J</span><span title="IndexDomain (JSON type)">IndexDomain</span> </a> <nav class=md-nav aria-label=IndexDomain> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-IndexDomain.rank class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.rank (JSON member) — Number of dimensions.">rank</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexDomain.inclusive_min class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.inclusive_min (JSON member) — Inclusive lower bounds of the domain.">inclusive_min</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexDomain.exclusive_max class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.exclusive_max (JSON member) — Exclusive upper bounds of the domain.">exclusive_max</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexDomain.inclusive_max class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.inclusive_max (JSON member) — Inclusive upper bounds of the domain.">inclusive_max</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexDomain.shape class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.shape (JSON member) — Extent of each dimension of the domain.">shape</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexDomain.labels class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexDomain.labels (JSON member) — Dimension labels for each dimension.">labels</span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#index-transform class=md-nav__link> Index transform </a> <nav class=md-nav aria-label="Index transform"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-IndexTransform class=md-nav__link> <span aria-label="JSON type" class="objinfo-icon objinfo-icon__data" title="JSON type">J</span><span title="IndexTransform (JSON type)">IndexTransform</span> </a> <nav class=md-nav aria-label=IndexTransform> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-IndexTransform.input_rank class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_rank (JSON member) — Number of input dimensions.">input_rank</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.input_inclusive_min class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_inclusive_min (JSON member) — Inclusive lower bounds of the input domain.">input_inclusive_min</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.input_exclusive_max class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_exclusive_max (JSON member) — Exclusive upper bounds of the input domain.">input_exclusive_max</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.input_inclusive_max class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_inclusive_max (JSON member) — Inclusive upper bounds of the input domain.">input_inclusive_max</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.input_shape class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_shape (JSON member) — Extent of each dimension of the input domain.">input_shape</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.input_labels class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.input_labels (JSON member) — Dimension labels for each input domain dimension.">input_labels</span> </a> </li> <li class=md-nav__item> <a href=#json-IndexTransform.output class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="IndexTransform.output (JSON member) — Specifies the output index map for each output dimension.">output</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#json-OutputIndexMap class=md-nav__link> <span aria-label="JSON type" class="objinfo-icon objinfo-icon__data" title="JSON type">J</span><span title="OutputIndexMap (JSON type) — Specifies a transform from an input space to a single output index.">OutputIndexMap</span> </a> <nav class=md-nav aria-label=OutputIndexMap> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-OutputIndexMap.offset class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="OutputIndexMap.offset (JSON member) — Specifies an offset for this output dimension.  If neither
input_dimension nor index_array is
specified, this specifies the constant value to which this output
dimension maps.">offset</span> </a> </li> <li class=md-nav__item> <a href=#json-OutputIndexMap.stride class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="OutputIndexMap.stride (JSON member) — Multiplier for the input index specified by
input_dimension or the index array value specified by
index_array.">stride</span> </a> </li> <li class=md-nav__item> <a href=#json-OutputIndexMap.input_dimension class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="OutputIndexMap.input_dimension (JSON member) — If present, indicates that this output dimension uses a single
input dimension map with the specified input dimension.  Must not
be specified in conjunction with index_array.">input_dimension</span> </a> </li> <li class=md-nav__item> <a href=#json-OutputIndexMap.index_array class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="OutputIndexMap.index_array (JSON member) — If present, indicates that this output dimension uses an index
array map, with the index array specified as a nested list of rank
equal to the input_rank.">index_array</span> </a> </li> <li class=md-nav__item> <a href=#json-OutputIndexMap.index_array_bounds class=md-nav__link> <span aria-label="JSON member" class="objinfo-icon objinfo-icon__sub-data" title="JSON member">j</span><span title="OutputIndexMap.index_array_bounds (JSON member)">index_array_bounds</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#json-IndexInterval class=md-nav__link> <span aria-label="JSON type" class="objinfo-icon objinfo-icon__data" title="JSON type">J</span><span title="IndexInterval (JSON type) — Specifies a closed interval of integer index values.">IndexInterval</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#alignment-and-broadcasting class=md-nav__link> Alignment and broadcasting </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset" role=main> <h1 id=index-space><span id=id1></span>Index space<a class=headerlink href=#index-space title="Permalink to this headline">¶</a></h1> <p>TensorStore defines an <em>index space</em> as an <span class="math notranslate nohighlight">\(n\)</span>-dimensional space, where <span class="math notranslate nohighlight">\(n\)</span> is the <em>rank</em> of the space and each index is an integer in the closed interval <span class="math notranslate nohighlight">\([-(2^{62}-2), +(2^{62}-2)]\)</span>. The special values <span class="math notranslate nohighlight">\(\pm (2^{62}-1)\)</span> are not valid indices but represent bounds of <span class="math notranslate nohighlight">\(\pm \infty\)</span>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The limits of <span class="math notranslate nohighlight">\(\pm (2^{62}-2)\)</span> permit <span class="math notranslate nohighlight">\(\pm (2^{62}-1)\)</span> to be reserved to represent <span class="math notranslate nohighlight">\(\pm \infty\)</span> and still allow the difference between any two bounds to be represented as a signed 64-bit integer.</p> </div> <p>TensorStore currently supports ranks <span class="math notranslate nohighlight">\(n\)</span> less than or equal to 32, which is the same constraint imposed by NumPy.</p> <p id=dimension-labels>Each of the <span class="math notranslate nohighlight">\(n\)</span> dimensions may optionally be identified by a unique string <em>label</em>, such as <code class="docutils literal notranslate"><span class=pre>&quot;x&quot;</span></code>, <code class="docutils literal notranslate"><span class=pre>&quot;y&quot;</span></code>, or <code class="docutils literal notranslate"><span class=pre>&quot;z&quot;</span></code>. Unlabeled dimensions are indicated by an empty string as the label.</p> <h2 id=index-domain><span id=implicit-bounds></span><span id=id2></span>Index domain<a class=headerlink href=#index-domain title="Permalink to this headline">¶</a></h2> <p>An <em>index domain</em> is a rectangular region of an index space.</p> <ul class=simple> <li><p>The inclusive lower bound of each dimensions is specified as an integer in <span class="math notranslate nohighlight">\([-(2^{62}-1), 2^{62}-2]\)</span>, where the special value of <span class="math notranslate nohighlight">\(-2^{62}-1\)</span> indicates the dimension is unbounded below.</p></li> <li><p>The inclusive upper bound of each dimension is specified as an integer in <span class="math notranslate nohighlight">\([-(2^{62}-2), 2^{62}-1]\)</span>, where the special value of <span class="math notranslate nohighlight">\(2^{62}-1\)</span> indicates the dimension is unbounded above.</p></li> <li><p>The lower and upper bound of each dimension is marked either <em>explicit</em> or <em>implicit</em> (represented as two additional bits per dimension). Explicit bounds indicate hard constraints on the valid indices for that dimension. Implicit bounds may be used for resizable dimensions of arrays: the implicit bound indicates the bound as of a certain time, but the bound may change if a resizable operation is performed, and indexing operations are not constrained by implicit bounds. Implicit bounds of <span class="math notranslate nohighlight">\(\pm \infty\)</span> are also used to indicate unknown or unspecified bounds.</p></li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Specifying infinite bounds <span class="math notranslate nohighlight">\((-\infty, +\infty)\)</span> for a dimension is similar to specifying the finite bounds <span class="math notranslate nohighlight">\([-(2^{62}-2, +(2^{62}-2)]\)</span>, in that in both cases the domain contains the full range of possible indices. The difference is that translating a dimension with infinite bounds has no effect, while translating a dimension with bounds <span class="math notranslate nohighlight">\([-(2^{62}-2, +(2^{62}-2)]\)</span> by any non-zero offset results in an out-of-bounds error.</p> </div> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexDomain> <em class=property><span class=pre>json</span> </em><span class="sig-name descname"><span class=pre>IndexDomain</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>object</span></span><a class=headerlink href=#json-IndexDomain title="Permalink to this definition">¶</a></dt> <dd><p><a class="reference internal" href=#index-domain><span class="std std-ref">Index domains</span></a> may be serialized to/from JSON using the following schema.</p> <p>If neither <a class="reference internal" href=#json-IndexDomain.inclusive_min title="IndexDomain.inclusive_min (JSON member) — Inclusive lower bounds of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>inclusive_min</span></code></a> nor <a class="reference internal" href=#json-IndexDomain.shape title="IndexDomain.shape (JSON member) — Extent of each dimension of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>shape</span></code></a> is specified, all dimensions receive an implicit lower bound of <span class="math notranslate nohighlight">\(-\infty\)</span>. If <a class="reference internal" href=#json-IndexDomain.shape title="IndexDomain.shape (JSON member) — Extent of each dimension of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>shape</span></code></a> is specified but <a class="reference internal" href=#json-IndexDomain.inclusive_min title="IndexDomain.inclusive_min (JSON member) — Inclusive lower bounds of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>inclusive_min</span></code></a> is not specified, all dimensions receive an explicit lower bound of 0.</p> <p>At most one of <a class="reference internal" href=#json-IndexDomain.exclusive_max title="IndexDomain.exclusive_max (JSON member) — Exclusive upper bounds of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>exclusive_max</span></code></a>, <a class="reference internal" href=#json-IndexDomain.inclusive_max title="IndexDomain.inclusive_max (JSON member) — Inclusive upper bounds of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>inclusive_max</span></code></a>, and <a class="reference internal" href=#json-IndexDomain.shape title="IndexDomain.shape (JSON member) — Extent of each dimension of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>shape</span></code></a> may be specified. If none are specified, all dimensions receive an implicit upper bound of <span class="math notranslate nohighlight">\(+\infty\)</span>.</p> <p class=rubric>Optional members</p> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexDomain.rank> <span class="sig-name descname"><span class=pre>rank</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>integer</span></span><sub><span class=p><span class=pre>[</span></span><code class="code highlight json docutils literal highlight-json"><span class=mi>0</span></code><span class=p><span class=pre>,</span> </span><code class="code highlight json docutils literal highlight-json"><span class=mi>32</span></code><span class=p><span class=pre>]</span></span></sub><a class=headerlink href=#json-IndexDomain.rank title="Permalink to this definition">¶</a></dt> <dd><span><p>Number of dimensions.</p> </span><p>The rank must be specified either directly, or implicitly by the number of dimensions specified for <a class="reference internal" href=#json-IndexDomain.inclusive_min title="IndexDomain.inclusive_min (JSON member) — Inclusive lower bounds of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>inclusive_min</span></code></a>, <a class="reference internal" href=#json-IndexDomain.inclusive_max title="IndexDomain.inclusive_max (JSON member) — Inclusive upper bounds of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>inclusive_max</span></code></a>, <a class="reference internal" href=#json-IndexDomain.exclusive_max title="IndexDomain.exclusive_max (JSON member) — Exclusive upper bounds of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>exclusive_max</span></code></a>, <a class="reference internal" href=#json-IndexDomain.shape title="IndexDomain.shape (JSON member) — Extent of each dimension of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>shape</span></code></a>, or <a class="reference internal" href=#json-IndexDomain.labels title="IndexDomain.labels (JSON member) — Dimension labels for each dimension."><code class="xref json json-schema docutils literal notranslate"><span class=pre>labels</span></code></a>.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexDomain.inclusive_min> <span class="sig-name descname"><span class=pre>inclusive_min</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><em> <span class=pre>of</span> </em><span class=desctype><span class=pre>integer</span></span><span class=p> <span class=pre>|</span> </span><span class=p><span class=pre>[</span></span><span class=desctype><span class=pre>integer</span></span><span class=p><span class=pre>]</span></span><a class=headerlink href=#json-IndexDomain.inclusive_min title="Permalink to this definition">¶</a></dt> <dd><span><p>Inclusive lower bounds of the domain.</p> </span><p>Length must equal the <a class="reference internal" href=#json-IndexDomain.rank title="IndexDomain.rank (JSON member) — Number of dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>rank</span></code></a>. Bounds specified as <code class="samp docutils literal notranslate"><em><span class=pre>n</span></em></code> indicate normal, explicit bounds, while bounds specified as <code class="samp docutils literal notranslate"><span class=pre>[</span><em><span class=pre>n</span></em><span class=pre>]</span></code> indicate <a class="reference internal" href=#implicit-bounds><span class="std std-ref">implicit bounds</span></a>. For example, <code class="code highlight json docutils literal highlight-json"><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>]]</span></code> specifies an explicit bound of <span class="math notranslate nohighlight">\(1 \leq x\)</span> for the first dimension and an implicit bound of <span class="math notranslate nohighlight">\(2 \leq x\)</span> for the second dimension.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexDomain.exclusive_max> <span class="sig-name descname"><span class=pre>exclusive_max</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><em> <span class=pre>of</span> </em><span class=desctype><span class=pre>integer</span></span><span class=p> <span class=pre>|</span> </span><span class=p><span class=pre>[</span></span><span class=desctype><span class=pre>integer</span></span><span class=p><span class=pre>]</span></span><a class=headerlink href=#json-IndexDomain.exclusive_max title="Permalink to this definition">¶</a></dt> <dd><span><p>Exclusive upper bounds of the domain.</p> </span><p>Length must equal the <a class="reference internal" href=#json-IndexDomain.rank title="IndexDomain.rank (JSON member) — Number of dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>rank</span></code></a>. As for <a class="reference internal" href=#json-IndexDomain.inclusive_min title="IndexDomain.inclusive_min (JSON member) — Inclusive lower bounds of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>inclusive_min</span></code></a>, bounds specified as <code class="samp docutils literal notranslate"><em><span class=pre>n</span></em></code> indicate normal, explicit bounds, while bounds specified as <code class="samp docutils literal notranslate"><span class=pre>[</span><em><span class=pre>n</span></em><span class=pre>]</span></code> indicate <a class="reference internal" href=#implicit-bounds><span class="std std-ref">implicit bounds</span></a>. For example, <code class="code highlight json docutils literal highlight-json"><span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=p>[</span><span class=mi>7</span><span class=p>]]</span></code> specifies an explicit bound of <span class="math notranslate nohighlight">\(x &lt; 5\)</span> for the first dimension and an implicit bound of <span class="math notranslate nohighlight">\(x &lt; 7\)</span> for the second dimension.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexDomain.inclusive_max> <span class="sig-name descname"><span class=pre>inclusive_max</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><em> <span class=pre>of</span> </em><span class=desctype><span class=pre>integer</span></span><span class=p> <span class=pre>|</span> </span><span class=p><span class=pre>[</span></span><span class=desctype><span class=pre>integer</span></span><span class=p><span class=pre>]</span></span><a class=headerlink href=#json-IndexDomain.inclusive_max title="Permalink to this definition">¶</a></dt> <dd><span><p>Inclusive upper bounds of the domain.</p> </span><p>Length must equal the <a class="reference internal" href=#json-IndexDomain.rank title="IndexDomain.rank (JSON member) — Number of dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>rank</span></code></a>. As for <a class="reference internal" href=#json-IndexDomain.inclusive_min title="IndexDomain.inclusive_min (JSON member) — Inclusive lower bounds of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>inclusive_min</span></code></a>, bounds specified as <code class="samp docutils literal notranslate"><em><span class=pre>n</span></em></code> indicate normal, explicit bounds, while bounds specified as <code class="samp docutils literal notranslate"><span class=pre>[</span><em><span class=pre>n</span></em><span class=pre>]</span></code> indicate <a class="reference internal" href=#implicit-bounds><span class="std std-ref">implicit bounds</span></a>. For example, <code class="code highlight json docutils literal highlight-json"><span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=p>[</span><span class=mi>7</span><span class=p>]]</span></code> specifies an explicit bound of <span class="math notranslate nohighlight">\(x \leq 5\)</span> for the first dimension and an implicit bound of <span class="math notranslate nohighlight">\(x \leq 7\)</span> for the second dimension.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexDomain.shape> <span class="sig-name descname"><span class=pre>shape</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><em> <span class=pre>of</span> </em><span class=desctype><span class=pre>integer</span></span><span class=p> <span class=pre>|</span> </span><span class=p><span class=pre>[</span></span><span class=desctype><span class=pre>integer</span></span><span class=p><span class=pre>]</span></span><a class=headerlink href=#json-IndexDomain.shape title="Permalink to this definition">¶</a></dt> <dd><span><p>Extent of each dimension of the domain.</p> </span><p>Length must equal the <a class="reference internal" href=#json-IndexDomain.rank title="IndexDomain.rank (JSON member) — Number of dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>rank</span></code></a>. As for <a class="reference internal" href=#json-IndexDomain.inclusive_min title="IndexDomain.inclusive_min (JSON member) — Inclusive lower bounds of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>inclusive_min</span></code></a>, bounds specified as <code class="samp docutils literal notranslate"><em><span class=pre>n</span></em></code> indicate normal, explicit bounds, while bounds specified as <code class="samp docutils literal notranslate"><span class=pre>[</span><em><span class=pre>n</span></em><span class=pre>]</span></code> indicate <a class="reference internal" href=#implicit-bounds><span class="std std-ref">implicit bounds</span></a>. For example, assuming an <a class="reference internal" href=#json-IndexDomain.inclusive_min title="IndexDomain.inclusive_min (JSON member) — Inclusive lower bounds of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>inclusive_min</span></code></a> of <code class="code highlight json docutils literal highlight-json"><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span></code>, an <a class="reference internal" href=#json-IndexDomain.shape title="IndexDomain.shape (JSON member) — Extent of each dimension of the domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>shape</span></code></a> of <code class="code highlight json docutils literal highlight-json"><span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=p>[</span><span class=mi>7</span><span class=p>]]</span></code> specifies an explicit bound of <span class="math notranslate nohighlight">\(x &lt; 6\)</span> for the first dimension and an implicit bound of <span class="math notranslate nohighlight">\(x &lt; 9\)</span> for the second dimension.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexDomain.labels> <span class="sig-name descname"><span class=pre>labels</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><em> <span class=pre>of</span> </em><span class=desctype><span class=pre>string</span></span><a class=headerlink href=#json-IndexDomain.labels title="Permalink to this definition">¶</a></dt> <dd><span><p><a class="reference internal" href=#dimension-labels><span class="std std-ref">Dimension labels</span></a> for each dimension.</p> </span><p>Length must equal the <a class="reference internal" href=#json-IndexDomain.rank title="IndexDomain.rank (JSON member) — Number of dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>rank</span></code></a>. An empty string indicates an unlabeled dimension. Non-empty strings must not occur more than once. By default, all dimensions are unlabeled.</p> </dd></dl> </dd></dl> <h2 id=index-transform><span id=id3></span>Index transform<a class=headerlink href=#index-transform title="Permalink to this headline">¶</a></h2> <p>An <em>index transform</em> from rank <span class="math notranslate nohighlight">\(m\)</span> to rank <span class="math notranslate nohighlight">\(n\)</span> maps every <span class="math notranslate nohighlight">\(m\)</span>-dimensional index vector in a rank-<span class="math notranslate nohighlight">\(m\)</span> <a class="reference internal" href=#index-domain><span class="std std-ref">index domain</span></a> to an <span class="math notranslate nohighlight">\(n\)</span>-dimensional index vector in the output space.</p> <p>It is defined by its input index domain and <span class="math notranslate nohighlight">\(n\)</span> <em>output index maps</em>, one for each dimension <span class="math notranslate nohighlight">\(j\)</span> of the output space, each of one of the following three forms:</p> <table class="colwidths-auto docutils data align-default" id=output-index-methods> <caption><span class=caption-text>Output index methods</span><a class=headerlink href=#output-index-methods title="Permalink to this table">¶</a></caption> <tbody> <tr class=row-odd><td><p id=index-transform-constant-map>constant</p> </td> <td><div class="math notranslate nohighlight"> \[\mathtt{output}[j] = \mathtt{offset},\]</div> <p>where <span class="math notranslate nohighlight">\(\mathtt{offset}\)</span> is an arbitrary 64-bit integer.</p> </td> </tr> <tr class=row-even><td><p id=index-transform-single-input-dimension-map>single input dimension</p> </td> <td><div class="math notranslate nohighlight"> \[\mathtt{output}[j] = \mathtt{offset} + \mathtt{stride} \cdot \mathtt{input}[\mathtt{input\_dimension}],\]</div> <p>where <span class="math notranslate nohighlight">\(\mathtt{offset}\)</span> and <span class="math notranslate nohighlight">\(\mathtt{stride}\)</span> are arbitrary 64-bit integers and <span class="math notranslate nohighlight">\(\mathtt{input\_dimension}\)</span> is in the range <span class="math notranslate nohighlight">\([0, m)\)</span>.</p> </td> </tr> <tr class=row-odd><td><p id=index-transform-array-map>index array</p> </td> <td><div class="math notranslate nohighlight"> \[\mathtt{output}[j] = \mathtt{offset} + \mathtt{stride} \cdot \mathtt{index\_array}[\mathtt{input}],\]</div> <p>where <span class="math notranslate nohighlight">\(\mathtt{offset}\)</span> and <span class="math notranslate nohighlight">\(\mathtt{stride}\)</span> are arbitrary 64-bit integers and <span class="math notranslate nohighlight">\(\mathtt{index\_array}\)</span> is an <span class="math notranslate nohighlight">\(n\)</span>-dimensional array of 64-bit integers indexed by a subset of the dimensions of the input index domain with explicit lower and upper bounds, stored as a strided array in memory. (The dimensions by which it is indexed are indicated by non-zero strides.)</p> </td> </tr> </tbody> </table> <p>TensorStore uses this normalized index transform representation to represent any composition of indexing operations. This representation is complete, since <em>any</em> mapping can be represented as an index array, but in many cases just the more efficient constant and single input dimension maps suffice.</p> <p>In most cases, two index transforms can be composed with low cost that is independent of the bounds specified in the domains: single input dimension maps may be composed with any other map without needing to copying any index arrays. Only when composing two index array maps is it necessary to write a new index array, and in some cases this can result in index array with a larger representation size.</p> <p>The following table describes the relationship between the input and output spaces of a transform, and the source and target arrays/TensorStores for read and write operations:</p> <table class="colwidths-auto docutils data align-default"> <thead> <tr class=row-odd><th class=head><p>Operation</p></th> <th class=head><p>Input domain</p></th> <th class=head><p>Output range</p></th> </tr> </thead> <tbody> <tr class=row-even><td><p>Read</p></td> <td><p>Corresponds to the target array.</p></td> <td><p>Indicates the positions of the underlying source TensorStore that are accessed.</p></td> </tr> <tr class=row-odd><td><p>Write</p></td> <td><p>Corresponds to the source array.</p></td> <td><p>Indicates the positions of the underlying target TensorStore that are modified.</p></td> </tr> </tbody> </table> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexTransform> <em class=property><span class=pre>json</span> </em><span class="sig-name descname"><span class=pre>IndexTransform</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>object</span></span><a class=headerlink href=#json-IndexTransform title="Permalink to this definition">¶</a></dt> <dd><p><a class="reference internal" href=#index-transform><span class="std std-ref">Index transforms</span></a> may be serialized to/from JSON using the following schema.</p> <p>The input domain is specified by <a class="reference internal" href=#json-IndexTransform.input_rank title="IndexTransform.input_rank (JSON member) — Number of input dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_rank</span></code></a>, <a class="reference internal" href=#json-IndexTransform.input_inclusive_min title="IndexTransform.input_inclusive_min (JSON member) — Inclusive lower bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_inclusive_min</span></code></a>, <a class="reference internal" href=#json-IndexTransform.input_exclusive_max title="IndexTransform.input_exclusive_max (JSON member) — Exclusive upper bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_exclusive_max</span></code></a>, <a class="reference internal" href=#json-IndexTransform.input_inclusive_max title="IndexTransform.input_inclusive_max (JSON member) — Inclusive upper bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_inclusive_max</span></code></a>, <a class="reference internal" href=#json-IndexTransform.input_shape title="IndexTransform.input_shape (JSON member) — Extent of each dimension of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_shape</span></code></a>, and <a class="reference internal" href=#json-IndexTransform.input_labels title="IndexTransform.input_labels (JSON member) — Dimension labels for each input domain dimension."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_labels</span></code></a>, while the output index maps are specified by <a class="reference internal" href=#json-IndexTransform.output title="IndexTransform.output (JSON member) — Specifies the output index map for each output dimension."><code class="xref json json-schema docutils literal notranslate"><span class=pre>output</span></code></a>.</p> <p>If neither <a class="reference internal" href=#json-IndexTransform.input_inclusive_min title="IndexTransform.input_inclusive_min (JSON member) — Inclusive lower bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_inclusive_min</span></code></a> nor <a class="reference internal" href=#json-IndexTransform.input_shape title="IndexTransform.input_shape (JSON member) — Extent of each dimension of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_shape</span></code></a> is specified, all dimensions receive an implicit lower bound of <span class="math notranslate nohighlight">\(-\infty\)</span>. If <a class="reference internal" href=#json-IndexTransform.input_shape title="IndexTransform.input_shape (JSON member) — Extent of each dimension of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_shape</span></code></a> is specified but <a class="reference internal" href=#json-IndexTransform.input_inclusive_min title="IndexTransform.input_inclusive_min (JSON member) — Inclusive lower bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_inclusive_min</span></code></a> is not specified, all dimensions receive an explicit lower bound of 0.</p> <p>At most one of <a class="reference internal" href=#json-IndexTransform.input_exclusive_max title="IndexTransform.input_exclusive_max (JSON member) — Exclusive upper bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_exclusive_max</span></code></a>, <a class="reference internal" href=#json-IndexTransform.input_inclusive_max title="IndexTransform.input_inclusive_max (JSON member) — Inclusive upper bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_inclusive_max</span></code></a>, and <a class="reference internal" href=#json-IndexTransform.input_shape title="IndexTransform.input_shape (JSON member) — Extent of each dimension of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_shape</span></code></a> may be specified. If none are specified, all dimensions receive an implicit upper bound of <span class="math notranslate nohighlight">\(+\infty\)</span>.</p> <p class=rubric>Optional members</p> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexTransform.input_rank> <span class="sig-name descname"><span class=pre>input_rank</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>integer</span></span><sub><span class=p><span class=pre>[</span></span><code class="code highlight json docutils literal highlight-json"><span class=mi>0</span></code><span class=p><span class=pre>,</span> </span><code class="code highlight json docutils literal highlight-json"><span class=mi>32</span></code><span class=p><span class=pre>]</span></span></sub><a class=headerlink href=#json-IndexTransform.input_rank title="Permalink to this definition">¶</a></dt> <dd><span><p>Number of input dimensions.</p> </span><p>The input rank must be specified either directly, or implicitly by the number of dimensions specified for <a class="reference internal" href=#json-IndexTransform.input_inclusive_min title="IndexTransform.input_inclusive_min (JSON member) — Inclusive lower bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_inclusive_min</span></code></a>, <a class="reference internal" href=#json-IndexTransform.input_inclusive_max title="IndexTransform.input_inclusive_max (JSON member) — Inclusive upper bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_inclusive_max</span></code></a>, <a class="reference internal" href=#json-IndexTransform.input_exclusive_max title="IndexTransform.input_exclusive_max (JSON member) — Exclusive upper bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_exclusive_max</span></code></a>, <a class="reference internal" href=#json-IndexTransform.input_shape title="IndexTransform.input_shape (JSON member) — Extent of each dimension of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_shape</span></code></a>, or <a class="reference internal" href=#json-IndexTransform.input_labels title="IndexTransform.input_labels (JSON member) — Dimension labels for each input domain dimension."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_labels</span></code></a>.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexTransform.input_inclusive_min> <span class="sig-name descname"><span class=pre>input_inclusive_min</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><em> <span class=pre>of</span> </em><span class=desctype><span class=pre>integer</span></span><span class=p> <span class=pre>|</span> </span><span class=p><span class=pre>[</span></span><span class=desctype><span class=pre>integer</span></span><span class=p><span class=pre>]</span></span><a class=headerlink href=#json-IndexTransform.input_inclusive_min title="Permalink to this definition">¶</a></dt> <dd><span><p>Inclusive lower bounds of the input domain.</p> </span><p>Length must equal the <a class="reference internal" href=#json-IndexTransform.input_rank title="IndexTransform.input_rank (JSON member) — Number of input dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_rank</span></code></a>. Bounds specified as <code class="samp docutils literal notranslate"><em><span class=pre>n</span></em></code> indicate normal, explicit bounds, while bounds specified as <code class="samp docutils literal notranslate"><span class=pre>[</span><em><span class=pre>n</span></em><span class=pre>]</span></code> indicate <a class="reference internal" href=#implicit-bounds><span class="std std-ref">implicit bounds</span></a>. For example, <code class="code highlight json docutils literal highlight-json"><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>]]</span></code> specifies an explicit bound of <span class="math notranslate nohighlight">\(1 \leq x\)</span> for the first dimension and an implicit bound of <span class="math notranslate nohighlight">\(2 \leq x\)</span> for the second dimension.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexTransform.input_exclusive_max> <span class="sig-name descname"><span class=pre>input_exclusive_max</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><em> <span class=pre>of</span> </em><span class=desctype><span class=pre>integer</span></span><span class=p> <span class=pre>|</span> </span><span class=p><span class=pre>[</span></span><span class=desctype><span class=pre>integer</span></span><span class=p><span class=pre>]</span></span><a class=headerlink href=#json-IndexTransform.input_exclusive_max title="Permalink to this definition">¶</a></dt> <dd><span><p>Exclusive upper bounds of the input domain.</p> </span><p>Length must equal the <a class="reference internal" href=#json-IndexTransform.input_rank title="IndexTransform.input_rank (JSON member) — Number of input dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_rank</span></code></a>. As for <a class="reference internal" href=#json-IndexTransform.input_inclusive_min title="IndexTransform.input_inclusive_min (JSON member) — Inclusive lower bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_inclusive_min</span></code></a>, bounds specified as <code class="samp docutils literal notranslate"><em><span class=pre>n</span></em></code> indicate normal, explicit bounds, while bounds specified as <code class="samp docutils literal notranslate"><span class=pre>[</span><em><span class=pre>n</span></em><span class=pre>]</span></code> indicate <a class="reference internal" href=#implicit-bounds><span class="std std-ref">implicit bounds</span></a>. For example, <code class="code highlight json docutils literal highlight-json"><span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=p>[</span><span class=mi>7</span><span class=p>]]</span></code> specifies an explicit bound of <span class="math notranslate nohighlight">\(x &lt; 5\)</span> for the first dimension and an implicit bound of <span class="math notranslate nohighlight">\(x &lt; 7\)</span> for the second dimension.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexTransform.input_inclusive_max> <span class="sig-name descname"><span class=pre>input_inclusive_max</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><em> <span class=pre>of</span> </em><span class=desctype><span class=pre>integer</span></span><span class=p> <span class=pre>|</span> </span><span class=p><span class=pre>[</span></span><span class=desctype><span class=pre>integer</span></span><span class=p><span class=pre>]</span></span><a class=headerlink href=#json-IndexTransform.input_inclusive_max title="Permalink to this definition">¶</a></dt> <dd><span><p>Inclusive upper bounds of the input domain.</p> </span><p>Length must equal the <a class="reference internal" href=#json-IndexTransform.input_rank title="IndexTransform.input_rank (JSON member) — Number of input dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_rank</span></code></a>. As for <a class="reference internal" href=#json-IndexTransform.input_inclusive_min title="IndexTransform.input_inclusive_min (JSON member) — Inclusive lower bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_inclusive_min</span></code></a>, bounds specified as <code class="samp docutils literal notranslate"><em><span class=pre>n</span></em></code> indicate normal, explicit bounds, while bounds specified as <code class="samp docutils literal notranslate"><span class=pre>[</span><em><span class=pre>n</span></em><span class=pre>]</span></code> indicate <a class="reference internal" href=#implicit-bounds><span class="std std-ref">implicit bounds</span></a>. For example, <code class="code highlight json docutils literal highlight-json"><span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=p>[</span><span class=mi>7</span><span class=p>]]</span></code> specifies an explicit bound of <span class="math notranslate nohighlight">\(x \leq 5\)</span> for the first dimension and an implicit bound of <span class="math notranslate nohighlight">\(x \leq 7\)</span> for the second dimension.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexTransform.input_shape> <span class="sig-name descname"><span class=pre>input_shape</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><em> <span class=pre>of</span> </em><span class=desctype><span class=pre>integer</span></span><span class=p> <span class=pre>|</span> </span><span class=p><span class=pre>[</span></span><span class=desctype><span class=pre>integer</span></span><span class=p><span class=pre>]</span></span><a class=headerlink href=#json-IndexTransform.input_shape title="Permalink to this definition">¶</a></dt> <dd><span><p>Extent of each dimension of the input domain.</p> </span><p>Length must equal the <a class="reference internal" href=#json-IndexTransform.input_rank title="IndexTransform.input_rank (JSON member) — Number of input dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_rank</span></code></a>. As for <a class="reference internal" href=#json-IndexTransform.input_inclusive_min title="IndexTransform.input_inclusive_min (JSON member) — Inclusive lower bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_inclusive_min</span></code></a>, bounds specified as <code class="samp docutils literal notranslate"><em><span class=pre>n</span></em></code> indicate normal, explicit bounds, while bounds specified as <code class="samp docutils literal notranslate"><span class=pre>[</span><em><span class=pre>n</span></em><span class=pre>]</span></code> indicate <a class="reference internal" href=#implicit-bounds><span class="std std-ref">implicit bounds</span></a>. For example, assuming an <a class="reference internal" href=#json-IndexTransform.input_inclusive_min title="IndexTransform.input_inclusive_min (JSON member) — Inclusive lower bounds of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_inclusive_min</span></code></a> of <code class="code highlight json docutils literal highlight-json"><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span></code>, an <a class="reference internal" href=#json-IndexTransform.input_shape title="IndexTransform.input_shape (JSON member) — Extent of each dimension of the input domain."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_shape</span></code></a> of <code class="code highlight json docutils literal highlight-json"><span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=p>[</span><span class=mi>7</span><span class=p>]]</span></code> specifies an explicit bound of <span class="math notranslate nohighlight">\(x &lt; 6\)</span> for the first dimension and an implicit bound of <span class="math notranslate nohighlight">\(x &lt; 9\)</span> for the second dimension.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexTransform.input_labels> <span class="sig-name descname"><span class=pre>input_labels</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><em> <span class=pre>of</span> </em><span class=desctype><span class=pre>string</span></span><a class=headerlink href=#json-IndexTransform.input_labels title="Permalink to this definition">¶</a></dt> <dd><span><p><a class="reference internal" href=#dimension-labels><span class="std std-ref">Dimension labels</span></a> for each input domain dimension.</p> </span><p>Length must equal the <a class="reference internal" href=#json-IndexTransform.input_rank title="IndexTransform.input_rank (JSON member) — Number of input dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_rank</span></code></a>. An empty string indicates an unlabeled dimension. Non-empty strings must not occur more than once. By default, all dimensions are unlabeled.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexTransform.output> <span class="sig-name descname"><span class=pre>output</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><em> <span class=pre>of</span> </em><span class=desctype><a class="reference internal" href=#json-OutputIndexMap title="OutputIndexMap (JSON type) — Specifies a transform from an input space to a single output index."><span class=pre>OutputIndexMap</span></a></span><a class=headerlink href=#json-IndexTransform.output title="Permalink to this definition">¶</a></dt> <dd><span><p>Specifies the output index map for each output dimension.</p> </span><p>If not specified, defaults to an identity transform over the input domain. Otherwise, the length determines the output rank of the transform.</p> </dd></dl> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-OutputIndexMap> <em class=property><span class=pre>json</span> </em><span class="sig-name descname"><span class=pre>OutputIndexMap</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>object</span></span><a class=headerlink href=#json-OutputIndexMap title="Permalink to this definition">¶</a></dt> <dd><span><p>Specifies a transform from an input space to a single output index.</p> </span><p>Logically, an output index map is a function that maps <code class="docutils literal notranslate"><span class=pre>n</span></code>-dimensional input index vectors to a single output index, using one of the supported <a class="reference internal" href=#output-index-methods><span class="std std-ref">output index methods</span></a>. This is used to represent the <a class="reference internal" href=#json-IndexTransform.output title="IndexTransform.output (JSON member) — Specifies the output index map for each output dimension."><code class="xref json json-schema docutils literal notranslate"><span class=pre>IndexTransform.output</span></code></a> mapping for each output dimension of an <a class="reference internal" href=#json-IndexTransform title="IndexTransform (JSON type)"><code class="xref json json-schema docutils literal notranslate"><span class=pre>IndexTransform</span></code></a>.</p> <p class=rubric>Optional members</p> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-OutputIndexMap.offset> <span class="sig-name descname"><span class=pre>offset</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>integer</span></span><a class=headerlink href=#json-OutputIndexMap.offset title="Permalink to this definition">¶</a></dt> <dd><span><p>Specifies an offset for this output dimension. If neither <a class="reference internal" href=#json-OutputIndexMap.input_dimension title="OutputIndexMap.input_dimension (JSON member) — If present, indicates that this output dimension uses a single input dimension map with the specified input dimension.  Must not be specified in conjunction with index_array."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_dimension</span></code></a> nor <a class="reference internal" href=#json-OutputIndexMap.index_array title="OutputIndexMap.index_array (JSON member) — If present, indicates that this output dimension uses an index array map, with the index array specified as a nested list of rank equal to the input_rank."><code class="xref json json-schema docutils literal notranslate"><span class=pre>index_array</span></code></a> is specified, this specifies the <strong>constant</strong> value to which this output dimension maps.</p> </span></dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-OutputIndexMap.stride> <span class="sig-name descname"><span class=pre>stride</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>integer</span></span><a class=headerlink href=#json-OutputIndexMap.stride title="Permalink to this definition">¶</a></dt> <dd><span><p>Multiplier for the input index specified by <a class="reference internal" href=#json-OutputIndexMap.input_dimension title="OutputIndexMap.input_dimension (JSON member) — If present, indicates that this output dimension uses a single input dimension map with the specified input dimension.  Must not be specified in conjunction with index_array."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_dimension</span></code></a> or the index array value specified by <a class="reference internal" href=#json-OutputIndexMap.index_array title="OutputIndexMap.index_array (JSON member) — If present, indicates that this output dimension uses an index array map, with the index array specified as a nested list of rank equal to the input_rank."><code class="xref json json-schema docutils literal notranslate"><span class=pre>index_array</span></code></a>.</p> </span><p>Only valid to specify in conjunction with <a class="reference internal" href=#json-OutputIndexMap.input_dimension title="OutputIndexMap.input_dimension (JSON member) — If present, indicates that this output dimension uses a single input dimension map with the specified input dimension.  Must not be specified in conjunction with index_array."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_dimension</span></code></a> or <a class="reference internal" href=#json-OutputIndexMap.index_array title="OutputIndexMap.index_array (JSON member) — If present, indicates that this output dimension uses an index array map, with the index array specified as a nested list of rank equal to the input_rank."><code class="xref json json-schema docutils literal notranslate"><span class=pre>index_array</span></code></a>.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-OutputIndexMap.input_dimension> <span class="sig-name descname"><span class=pre>input_dimension</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>integer</span></span><sub><span class=p><span class=pre>[</span></span><code class="code highlight json docutils literal highlight-json"><span class=mi>0</span></code><span class=p><span class=pre>,</span> </span><span class=o><span class=pre>+∞</span></span><span class=p><span class=pre>)</span></span></sub><a class=headerlink href=#json-OutputIndexMap.input_dimension title="Permalink to this definition">¶</a></dt> <dd><span><p>If present, indicates that this output dimension uses a <strong>single input dimension</strong> map with the specified input dimension. Must not be specified in conjunction with <a class="reference internal" href=#json-OutputIndexMap.index_array title="OutputIndexMap.index_array (JSON member) — If present, indicates that this output dimension uses an index array map, with the index array specified as a nested list of rank equal to the input_rank."><code class="xref json json-schema docutils literal notranslate"><span class=pre>index_array</span></code></a>.</p> </span></dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-OutputIndexMap.index_array> <span class="sig-name descname"><span class=pre>index_array</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><span class=pre>array</span></span><span class=p> <span class=pre>|</span> </span><span class=desctype><span class=pre>integer</span></span><a class=headerlink href=#json-OutputIndexMap.index_array title="Permalink to this definition">¶</a></dt> <dd><span><p>If present, indicates that this output dimension uses an <strong>index array</strong> map, with the index array specified as a nested list of rank equal to the <a class="reference internal" href=#json-IndexTransform.input_rank title="IndexTransform.input_rank (JSON member) — Number of input dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_rank</span></code></a>.</p> </span><p>If the <a class="reference internal" href=#json-IndexTransform.input_rank title="IndexTransform.input_rank (JSON member) — Number of input dimensions."><code class="xref json json-schema docutils literal notranslate"><span class=pre>input_rank</span></code></a> is 0, must be a numeric value.</p> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-OutputIndexMap.index_array_bounds> <span class="sig-name descname"><span class=pre>index_array_bounds</span></span><span class=p> <span class=pre>:</span> </span><span class=desctype><a class="reference internal" href=#json-IndexInterval title="IndexInterval (JSON type) — Specifies a closed interval of integer index values."><span class=pre>IndexInterval</span></a></span><span class=p> <span class=pre>=</span> </span><code class="code highlight json docutils literal highlight-json"><span class=p>[</span><span class=s2>&quot;-inf&quot;</span><span class=p>,</span> <span class=s2>&quot;+inf&quot;</span><span class=p>]</span></code><a class=headerlink href=#json-OutputIndexMap.index_array_bounds title="Permalink to this definition">¶</a></dt> <dd><p>If present, specifies constraints on the values within <a class="reference internal" href=#json-OutputIndexMap.index_array title="OutputIndexMap.index_array (JSON member) — If present, indicates that this output dimension uses an index array map, with the index array specified as a nested list of rank equal to the input_rank."><code class="xref json json-schema docutils literal notranslate"><span class=pre>index_array</span></code></a> (which must also be specified). If <a class="reference internal" href=#json-OutputIndexMap.index_array title="OutputIndexMap.index_array (JSON member) — If present, indicates that this output dimension uses an index array map, with the index array specified as a nested list of rank equal to the input_rank."><code class="xref json json-schema docutils literal notranslate"><span class=pre>index_array</span></code></a> contains an out-of-bounds index, an error may not be returned immediately but will be returned if the corresponding position within the domain is accessed. If the indices in <a class="reference internal" href=#json-OutputIndexMap.index_array title="OutputIndexMap.index_array (JSON member) — If present, indicates that this output dimension uses an index array map, with the index array specified as a nested list of rank equal to the input_rank."><code class="xref json json-schema docutils literal notranslate"><span class=pre>index_array</span></code></a> have already been validated, this need not be specified. This allows transforms containing out-of-bounds index array indices to correctly round trip through JSON, but normally need not be specified manually.</p> <div class="example admonition"> <p class=admonition-title>Example</p> <div class="highlight-json notranslate"><div class=highlight><pre><span></span><code><span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>100</span><span class=p>]</span>
</code></pre></div> </div> </div> <div class="example admonition"> <p class=admonition-title>Example</p> <div class="highlight-json notranslate"><div class=highlight><pre><span></span><code><span class=p>[</span><span class=s2>&quot;-inf&quot;</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>
</code></pre></div> </div> </div> <div class="example admonition"> <p class=admonition-title>Example</p> <div class="highlight-json notranslate"><div class=highlight><pre><span></span><code><span class=p>[</span><span class=mi>-20</span><span class=p>,</span> <span class=s2>&quot;+inf&quot;</span><span class=p>]</span>
</code></pre></div> </div> </div> </dd></dl> </dd></dl> <dl class="json schema objdesc"> <dt class="sig sig-object json" id=json-IndexInterval> <em class=property><span class=pre>json</span> </em><span class="sig-name descname"><span class=pre>IndexInterval</span></span><span class=p> <span class=pre>:</span> </span><span class=p><span class=pre>[</span></span><span class=desctype><span class=pre>integer</span></span><span class=p> <span class=pre>|</span> </span><code class="code highlight json docutils literal highlight-json"><span class=s2>&quot;-inf&quot;</span></code><span class=p><span class=pre>,</span></span> <span class=desctype><span class=pre>integer</span></span><span class=p> <span class=pre>|</span> </span><code class="code highlight json docutils literal highlight-json"><span class=s2>&quot;+inf&quot;</span></code><span class=p><span class=pre>]</span></span><a class=headerlink href=#json-IndexInterval title="Permalink to this definition">¶</a></dt> <dd><span><p>Specifies a closed interval of integer index values.</p> </span></dd></dl> <h2 id=alignment-and-broadcasting><span id=index-domain-alignment></span>Alignment and broadcasting<a class=headerlink href=#alignment-and-broadcasting title="Permalink to this headline">¶</a></h2> <p>Many operations in TensorStore involving two <a class="reference internal" href=#index-domain><span class="std std-ref">index domains</span></a>, such as read, write, and copy operations, automatically <em>align</em> the <code class="docutils literal notranslate"><span class=pre>source</span></code> domain to the <code class="docutils literal notranslate"><span class=pre>target</span></code> domain.</p> <p>The following alignment methods are supported (by default, all alignment methods are used):</p> <dl class=simple> <dt>permute</dt><dd><p>Source dimensions are permuted based on their labels in order to align the source domain to the target domain.</p> </dd> <dt>translate</dt><dd><p>Source dimensions are translated in order to align the source domain to the target.</p> </dd> <dt>broadcast</dt><dd><p>Source dimensions of size 1 do not have to match a target dimension, and not all target dimensions must match a source dimension.</p> </dd> </dl> <p>Alignment is performed based on the following rules:</p> <p>First, a subset of the <code class="docutils literal notranslate"><span class=pre>source</span></code> dimensions are matched to a subset of the <code class="docutils literal notranslate"><span class=pre>target</span></code> dimensions, according to one of two cases:</p> <table class="colwidths-auto docutils data align-default"> <tbody> <tr class=row-odd><td><p>M1</p></td> <td><p>At least one of <code class="docutils literal notranslate"><span class=pre>source</span></code> or <code class="docutils literal notranslate"><span class=pre>target</span></code> is entirely unlabeled (all dimension labels are empty). In this case, the last <span class="math notranslate nohighlight">\(\mathtt{match\_rank} = \min(\mathtt{source\_rank}, \mathtt{target\_rank})\)</span> dimensions of <code class="docutils literal notranslate"><span class=pre>source</span></code> match in order to the last <span class="math notranslate nohighlight">\(\mathtt{match\_rank}\)</span> dimensions of <code class="docutils literal notranslate"><span class=pre>target</span></code>, i.e. dimension <span class="math notranslate nohighlight">\(\mathtt{source\_rank} - \mathtt{match\_rank} + i\)</span> of <code class="docutils literal notranslate"><span class=pre>source</span></code> matches to dimension <span class="math notranslate nohighlight">\(\mathtt{target\_rank} - \mathtt{match\_rank} + i\)</span> of <code class="docutils literal notranslate"><span class=pre>target</span></code>, for <span class="math notranslate nohighlight">\(0 \leq i &lt; \mathtt{match\_rank}\)</span>. This case also applies if the <strong>permute</strong> alignment method is not permitted.</p></td> </tr> <tr class=row-even><td><p>M2</p></td> <td><p>Both <code class="docutils literal notranslate"><span class=pre>source</span></code> and <code class="docutils literal notranslate"><span class=pre>target</span></code> have at least one labeled dimension. In this case, dimensions of <code class="docutils literal notranslate"><span class=pre>source</span></code> and <code class="docutils literal notranslate"><span class=pre>target</span></code> with matching labels are matched. Any remaining labeled dimensions remain unmatched. The unlabeled dimensions of <code class="docutils literal notranslate"><span class=pre>source</span></code> are matched to the unlabeled dimensions of <code class="docutils literal notranslate"><span class=pre>target</span></code> using the same method as in case M1 (right to left).</p></td> </tr> </tbody> </table> <p>The matching is then validated as follows:</p> <table class="colwidths-auto docutils data align-default"> <tbody> <tr class=row-odd><td><p>V1</p></td> <td><p>For each match between a dimension <span class="math notranslate nohighlight">\(i\)</span> of <code class="docutils literal notranslate"><span class=pre>source</span></code> and a dimension <span class="math notranslate nohighlight">\(j\)</span> of <code class="docutils literal notranslate"><span class=pre>target</span></code>, if <span class="math notranslate nohighlight">\(\mathtt{source\_shape}[i] \neq \mathtt{target\_shape}[j]\)</span>, the match is dropped. Note that if <span class="math notranslate nohighlight">\(\mathtt{source\_shape}[i] \neq 1\)</span>, this leads to an error in step V3.</p></td> </tr> <tr class=row-even><td><p>V2</p></td> <td><p>If the <strong>broadcast</strong> alignment method is not permitted, it is an error for any source or target dimension to be unmatched. (In this case, any matches dropped in step V1 result in an error.)</p></td> </tr> <tr class=row-odd><td><p>V3</p></td> <td><p>For every unmatched dimension <span class="math notranslate nohighlight">\(i\)</span> of <code class="docutils literal notranslate"><span class=pre>source</span></code>, <span class="math notranslate nohighlight">\(\mathtt{source\_shape}[i]\)</span> must equal <span class="math notranslate nohighlight">\(1\)</span>.</p></td> </tr> <tr class=row-even><td><p>V4</p></td> <td><p>If the <strong>translate</strong> alignment method is not permitted, for each match between a dimension <span class="math notranslate nohighlight">\(i\)</span> of <code class="docutils literal notranslate"><span class=pre>source</span></code> and a dimension <span class="math notranslate nohighlight">\(j\)</span> of <code class="docutils literal notranslate"><span class=pre>target</span></code>, it is an error if <span class="math notranslate nohighlight">\(\mathtt{source\_origin}[i] \neq \mathtt{target\_origin}[j]\)</span>.</p></td> </tr> </tbody> </table> <p>If matching succeeds, a new <code class="docutils literal notranslate"><span class=pre>alignment</span></code> transform with an (input) domain equal to <code class="docutils literal notranslate"><span class=pre>target</span></code> and an output rank equal to <span class="math notranslate nohighlight">\(\mathtt{source\_rank}\)</span> is computed as follows:</p> <table class="colwidths-auto docutils data align-default"> <tbody> <tr class=row-odd><td><p>A1</p></td> <td><p>For each dimension <span class="math notranslate nohighlight">\(j\)</span> of <code class="docutils literal notranslate"><span class=pre>target</span></code> with a matching dimension <span class="math notranslate nohighlight">\(i\)</span> of <code class="docutils literal notranslate"><span class=pre>source</span></code>, output dimension <span class="math notranslate nohighlight">\(i\)</span> of <code class="docutils literal notranslate"><span class=pre>alignment</span></code> has a <em>single_input_dimension</em> map to input dimension <span class="math notranslate nohighlight">\(j\)</span> with a stride of <span class="math notranslate nohighlight">\(1\)</span> and offset of <span class="math notranslate nohighlight">\(\mathtt{source\_origin}[i] - \mathtt{target\_origin}[j]\)</span>.</p></td> </tr> <tr class=row-even><td><p>A2</p></td> <td><p>For every unmatched dimension <span class="math notranslate nohighlight">\(i\)</span> of <code class="docutils literal notranslate"><span class=pre>source</span></code>, output dimension <span class="math notranslate nohighlight">\(i\)</span> of <code class="docutils literal notranslate"><span class=pre>alignment</span></code> is a <em>constant</em> map with an offset of <span class="math notranslate nohighlight">\(\mathtt{source\_origin}[i]\)</span>. (It must be the case that <span class="math notranslate nohighlight">\(\mathtt{source\_shape}[i] = 1\)</span>.)</p></td> </tr> </tbody> </table> <p>The <code class="docutils literal notranslate"><span class=pre>alignment</span></code> transform maps <code class="docutils literal notranslate"><span class=pre>target</span></code> positions to corresponding <code class="docutils literal notranslate"><span class=pre>source</span></code> positions; for example, when copying, each position of the <code class="docutils literal notranslate"><span class=pre>target</span></code> domain is assigned the value at the corresponding position of the <code class="docutils literal notranslate"><span class=pre>source</span></code> domain. If the <code class="docutils literal notranslate"><span class=pre>broadcast</span></code> alignment method is used, the transform may map the same <code class="docutils literal notranslate"><span class=pre>source</span></code> position to multiple <code class="docutils literal notranslate"><span class=pre>target</span></code> positions.</p> <p>Examples:</p> <ul> <li><p>All unlabeled dimensions</p> <ul> <li><p>source: <code class="docutils literal notranslate"><span class=pre>[3,</span> <span class=pre>7),</span> <span class=pre>[5,</span> <span class=pre>6),</span> <span class=pre>[4,</span> <span class=pre>10)</span></code></p></li> <li><p>target: <code class="docutils literal notranslate"><span class=pre>[2,</span> <span class=pre>6),</span> <span class=pre>[0,</span> <span class=pre>4),</span> <span class=pre>[6,</span> <span class=pre>12)</span></code></p></li> <li><p>alignment: rank <span class="math notranslate nohighlight">\(3 \rightarrow 3\)</span>, with:</p> <div class="math notranslate nohighlight"> \[\begin{split}\mathrm{source}[0] &amp;= \mathrm{target}[0] + 1 \\ \mathrm{source}[1] &amp;= 5 \\ \mathrm{source}[2] &amp;= \mathrm{target}[2] - 2\end{split}\]</div> </li> </ul> </li> <li><p>All labeled dimensions</p> <ul> <li><p>source: <code class="docutils literal notranslate"><span class=pre>&quot;x&quot;:</span> <span class=pre>[3,</span> <span class=pre>7),</span> <span class=pre>&quot;y&quot;:</span> <span class=pre>[5,</span> <span class=pre>6),</span> <span class=pre>&quot;z&quot;:</span> <span class=pre>[4,</span> <span class=pre>10)</span></code></p></li> <li><p>target: <code class="docutils literal notranslate"><span class=pre>&quot;z&quot;:</span> <span class=pre>[6,</span> <span class=pre>12),</span> <span class=pre>&quot;x&quot;:</span> <span class=pre>[4,</span> <span class=pre>8),</span> <span class=pre>&quot;y&quot;:</span> <span class=pre>[0,</span> <span class=pre>4)</span></code></p></li> <li><p>alignment: rank <span class="math notranslate nohighlight">\(3 \rightarrow 3\)</span>, with:</p> <div class="math notranslate nohighlight"> \[\begin{split}\mathrm{source}[0] &amp;= \mathrm{target}[1] - 1 \\ \mathrm{source}[1] &amp;= 5 \\ \mathrm{source}[2] &amp;= \mathrm{target}[0] - 2\end{split}\]</div> </li> </ul> </li> <li><p>Partially labeled dimensions</p> <ul> <li><p>source: <code class="docutils literal notranslate"><span class=pre>&quot;x&quot;:</span> <span class=pre>[3,</span> <span class=pre>7),</span> <span class=pre>&quot;y&quot;:</span> <span class=pre>[5,</span> <span class=pre>6),</span> <span class=pre>&quot;&quot;:</span> <span class=pre>[4,</span> <span class=pre>10)</span></code></p></li> <li><p>target: <code class="docutils literal notranslate"><span class=pre>&quot;&quot;:</span> <span class=pre>[0,</span> <span class=pre>10)</span> <span class=pre>&quot;&quot;:</span> <span class=pre>[6,</span> <span class=pre>12),</span> <span class=pre>&quot;x&quot;:</span> <span class=pre>[4,</span> <span class=pre>8),</span> <span class=pre>&quot;y&quot;:</span> <span class=pre>[0,</span> <span class=pre>4)</span></code></p></li> <li><p>alignment: rank <span class="math notranslate nohighlight">\(4 \rightarrow 3\)</span>, with:</p> <div class="math notranslate nohighlight"> \[\begin{split}\mathrm{source}[0] &amp;= \mathrm{target}[2] - 1 \\ \mathrm{source}[1] &amp;= 5 \\ \mathrm{source}[2] &amp;= \mathrm{target}[1] - 2\end{split}\]</div> </li> </ul> </li> <li><p>Mismatched labeled dimensions</p> <ul class=simple> <li><p>source: <code class="docutils literal notranslate"><span class=pre>&quot;x&quot;:</span> <span class=pre>[3,</span> <span class=pre>7),</span> <span class=pre>&quot;y&quot;:</span> <span class=pre>[5,</span> <span class=pre>6),</span> <span class=pre>&quot;z&quot;:</span> <span class=pre>[4,</span> <span class=pre>10)</span></code></p></li> <li><p>target: <code class="docutils literal notranslate"><span class=pre>&quot;z&quot;:</span> <span class=pre>[6,</span> <span class=pre>12),</span> <span class=pre>&quot;w&quot;:</span> <span class=pre>[4,</span> <span class=pre>8),</span> <span class=pre>&quot;y&quot;:</span> <span class=pre>[0,</span> <span class=pre>4)</span></code></p></li> <li><p>ERROR: Unmatched source dimension 0 <code class="docutils literal notranslate"><span class=pre>{&quot;x&quot;:</span> <span class=pre>[3,</span> <span class=pre>7)}</span></code> does not have a size of 1</p></li> </ul> </li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The alignment behavior supported by TensorStore is fully compatible with <a class="reference external" href=https://numpy.org/doc/stable/user/basics.broadcasting.html#module-numpy.doc.broadcasting title="(in NumPy v1.19)"><code class="xref py py-obj docutils literal notranslate"><span class=pre>NumPy</span> <span class=pre>broadcasting</span></code></a> but additionally is extended to support non-zero origins and labeled dimensions.</p> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-up width=24 height=24 viewbox="0 0 24 24"><path d=M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z /></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=spec.html class="md-footer__link md-footer__link--prev" aria-label="Previous: JSON Spec" rel=prev> <div class="md-footer__button md-icon"> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-left width=24 height=24 viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> JSON Spec </div> </div> </a> <a href=schema.html class="md-footer__link md-footer__link--next" aria-label="Next: Schema" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Schema </div> </div> <div class="md-footer__button md-icon"> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-right width=24 height=24 viewbox="0 0 24 24"><path d=M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z /></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": ["navigation.expand", "navigation.sections", "navigation.top"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=_static/javascripts/bundle.js></script> <script data-url_root=./ id=documentation_options src=_static/documentation_options.js></script> <script async=async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script>window.MathJax = {"chtml": {"displayAlign": "left"}}</script> </body> </html>