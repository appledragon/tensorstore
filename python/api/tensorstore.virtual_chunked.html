<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=../../_static/logo.svg><title>tensorstore.virtual_chunked - TensorStore</title><link rel=stylesheet href=../../_static/stylesheets/main.css><link rel=stylesheet href=../../_static/stylesheets/palette.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>
          :root {
            --md-text-font-family: "Roboto";
            --md-code-font-family: "Roboto Mono";
          }
        </style></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=green data-md-color-accent=light-blue> <script>

  /* Prepend the base path to the given key to ensure uniqueness */
  function __prefix(key) {
    var prefix = new URL("../..", location)
    return prefix.pathname + "." + key
  }

  /* Fetch the given key from the given storage */
  function __get(key, storage = localStorage) {
    return JSON.parse(storage.getItem(__prefix(key)))
  }
</script> <script>
  var palette = __get("__palette")
  if (palette !== null && typeof palette.color === "object")
    for (var key in palette.color)
      document.body.setAttribute("data-md-color-" + key, palette.color[key])
</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../index.html title=TensorStore class="md-header__button md-logo" aria-label=TensorStore data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 132.0 132.0"><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=2.0 x2=130.8 y2=2.0 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=16.2 x2=130.8 y2=16.2 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=30.4 x2=130.8 y2=30.4 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=44.7 x2=130.8 y2=44.7 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=58.9 x2=130.8 y2=58.9 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=73.1 x2=130.8 y2=73.1 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=87.3 x2=130.8 y2=87.3 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=101.6 x2=130.8 y2=101.6 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=115.8 x2=130.8 y2=115.8 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=130.0 x2=130.8 y2=130.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=2.0 y2=130.0 x2=2.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=16.2 y2=130.0 x2=16.2 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=30.4 y2=130.0 x2=30.4 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=44.7 y2=130.0 x2=44.7 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=58.9 y2=130.0 x2=58.9 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=73.1 y2=130.0 x2=73.1 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=87.3 y2=130.0 x2=87.3 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=101.6 y2=130.0 x2=101.6 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=115.8 y2=130.0 x2=115.8 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=130.0 y2=130.0 x2=130.0 /><rect fill=currentColor x=3.5 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=17.7 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=46.2 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=17.7 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=117.3 width=11.2 height=11.2 /></svg> </a> <label class="md-header__button md-icon" for=__drawer> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-menu width=24 height=24 viewbox="0 0 24 24"><path d=M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z /></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> TensorStore </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> tensorstore.virtual_chunked </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=green data-md-color-accent=light-blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_2 hidden> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-lightbulb width=24 height=24 viewbox="0 0 24 24"><path d="M12,2A7,7 0 0,0 5,9C5,11.38 6.19,13.47 8,14.74V17A1,1 0 0,0 9,18H15A1,1 0 0,0 16,17V14.74C17.81,13.47 19,11.38 19,9A7,7 0 0,0 12,2M9,21A1,1 0 0,0 10,22H14A1,1 0 0,0 15,21V20H9V21Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=light-blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-lightbulb-outline width=24 height=24 viewbox="0 0 24 24"><path d="M12,2A7,7 0 0,1 19,9C19,11.38 17.81,13.47 16,14.74V17A1,1 0 0,1 15,18H9A1,1 0 0,1 8,17V14.74C6.19,13.47 5,11.38 5,9A7,7 0 0,1 12,2M9,21V20H15V21A1,1 0 0,1 14,22H10A1,1 0 0,1 9,21M12,4A5,5 0 0,0 7,9C7,11.05 8.23,12.81 10,13.58V16H14V13.58C15.77,12.81 17,11.05 17,9A5,5 0 0,0 12,4Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-magnify width=24 height=24 viewbox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-magnify width=24 height=24 viewbox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-left width=24 height=24 viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-close width=24 height=24 viewbox="0 0 24 24"><path d=M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z /></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/google/tensorstore/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> google/tensorstore </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=TensorStore class="md-nav__button md-logo" aria-label=TensorStore data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 132.0 132.0"><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=2.0 x2=130.8 y2=2.0 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=16.2 x2=130.8 y2=16.2 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=30.4 x2=130.8 y2=30.4 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=44.7 x2=130.8 y2=44.7 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=58.9 x2=130.8 y2=58.9 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=73.1 x2=130.8 y2=73.1 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=87.3 x2=130.8 y2=87.3 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=101.6 x2=130.8 y2=101.6 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=115.8 x2=130.8 y2=115.8 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=130.0 x2=130.8 y2=130.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=2.0 y2=130.0 x2=2.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=16.2 y2=130.0 x2=16.2 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=30.4 y2=130.0 x2=30.4 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=44.7 y2=130.0 x2=44.7 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=58.9 y2=130.0 x2=58.9 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=73.1 y2=130.0 x2=73.1 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=87.3 y2=130.0 x2=87.3 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=101.6 y2=130.0 x2=101.6 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=115.8 y2=130.0 x2=115.8 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=130.0 y2=130.0 x2=130.0 /><rect fill=currentColor x=3.5 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=17.7 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=46.2 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=17.7 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=117.3 width=11.2 height=11.2 /></svg> </a> TensorStore </label> <div class=md-nav__source> <a href=https://github.com/google/tensorstore/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> google/tensorstore </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1 checked> <label class=md-nav__link for=__nav_1> <a class href=../tutorial.html>Python API</a> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Python API" data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Python API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tutorial.html class=md-nav__link> Tutorial </a> </li> <li class=md-nav__item> <a href=../indexing.html class=md-nav__link> Indexing </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_3 type=checkbox id=__nav_1_3 checked> <label class=md-nav__link for=__nav_1_3> <a class href=index.html>API reference</a> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="API reference" data-md-level=2> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> API reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=index.html#core class=md-nav__link> Core </a> </li> <li class=md-nav__item> <a href=index.html#indexing class=md-nav__link> Indexing </a> </li> <li class=md-nav__item> <a href=index.html#spec class=md-nav__link> Spec </a> </li> <li class=md-nav__item> <a href=index.html#views class=md-nav__link> Views </a> </li> <li class=md-nav__item> <a href=index.html#data-types class=md-nav__link> Data types </a> </li> <li class=md-nav__item> <a href=index.html#asynchronous-support class=md-nav__link> Asynchronous support </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_3_7 type=checkbox id=__nav_1_3_7 checked> <label class=md-nav__link for=__nav_1_3_7> <a class href=index.html#virtual-views>Virtual views</a> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Virtual views" data-md-level=3> <label class=md-nav__title for=__nav_1_3_7> <span class="md-nav__icon md-icon"></span> Virtual views </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=tensorstore.VirtualChunkedReadParameters.html class=md-nav__link> <span aria-label="Python class" class="objinfo-icon objinfo-icon__data" title="Python class">C</span><span title="tensorstore.VirtualChunkedReadParameters (Python class) — Options passed to read callbacks used with virtual_chunked.">VirtualChunkedReadParameters</span> </a> </li> <li class=md-nav__item> <a href=tensorstore.VirtualChunkedWriteParameters.html class=md-nav__link> <span aria-label="Python class" class="objinfo-icon objinfo-icon__data" title="Python class">C</span><span title="tensorstore.VirtualChunkedWriteParameters (Python class) — Options passed to write callbacks used with virtual_chunked.">VirtualChunkedWriteParameters</span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.virtual_chunked (Python function) — Creates a TensorStore where the content is read/written chunk-wise by an arbitrary function.">virtual_chunked</span> <span class="md-nav__icon md-icon"></span> </label> <a href class="md-nav__link md-nav__link--active"> <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.virtual_chunked (Python function) — Creates a TensorStore where the content is read/written chunk-wise by an arbitrary function.">virtual_chunked</span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.virtual_chunked (Python function) — Creates a TensorStore where the content is read/written chunk-wise by an arbitrary function.">virtual_chunked</span> </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#parameters class=md-nav__link> Parameters </a> <nav class=md-nav aria-label=Parameters> <ul class=md-nav__list> <li class=md-nav__item> <a href=#p-read_function class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests.">read_function</span> </a> </li> <li class=md-nav__item> <a href=#p-write_function class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests.">write_function</span> </a> </li> <li class=md-nav__item> <a href=#p-loop class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or
write_function if they are
async functions.">loop</span> </a> </li> <li class=md-nav__item> <a href=#p-rank class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.rank (Python parameter) — Constrains the rank of the TensorStore.">rank</span> </a> </li> <li class=md-nav__item> <a href=#p-dtype class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.dtype (Python parameter) — Constrains the data type of the TensorStore.">dtype</span> </a> </li> <li class=md-nav__item> <a href=#p-domain class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.domain (Python parameter) — Constrains the domain of the TensorStore.">domain</span> </a> </li> <li class=md-nav__item> <a href=#p-shape class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.shape (Python parameter) — Constrains the shape and origin of the TensorStore.">shape</span> </a> </li> <li class=md-nav__item> <a href=#p-chunk_layout class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.chunk_layout (Python parameter) — Constrains the chunk layout.">chunk_layout</span> </a> </li> <li class=md-nav__item> <a href=#p-dimension_units class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.dimension_units (Python parameter) — Specifies the physical units of each dimension of the domain.">dimension_units</span> </a> </li> <li class=md-nav__item> <a href=#p-schema class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.schema (Python parameter) — Additional schema constraints to merge with existing constraints.">schema</span> </a> </li> <li class=md-nav__item> <a href=#p-context class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.context (Python parameter) — Shared resource context.">context</span> </a> </li> <li class=md-nav__item> <a href=#p-transaction class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.transaction (Python parameter) — Transaction to use for opening/creating, and for subsequent operations.">transaction</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#caching class=md-nav__link> Caching </a> </li> <li class=md-nav__item> <a href=#pickle-support class=md-nav__link> Pickle support </a> </li> <li class=md-nav__item> <a href=#transaction-support class=md-nav__link> Transaction support </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 data-md-state=indeterminate type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> <a class href=../../installation.html>Setup</a> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Setup data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../installation.html class=md-nav__link> Building and Installing </a> </li> <li class=md-nav__item> <a href=../../environment.html class=md-nav__link> Environment variables </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 data-md-state=indeterminate type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> <a class href=../../spec.html>JSON</a> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=JSON data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> JSON </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../spec.html class=md-nav__link> JSON Spec </a> </li> <li class=md-nav__item> <a href=../../index_space.html class=md-nav__link> Index space </a> </li> <li class=md-nav__item> <a href=../../schema.html class=md-nav__link> Schema </a> </li> <li class=md-nav__item> <a href=../../context.html class=md-nav__link> Context framework </a> </li> <li class=md-nav__item> <a href=../../driver/index.html class=md-nav__link> Drivers </a> </li> <li class=md-nav__item> <a href=../../kvstore/index.html class=md-nav__link> Key-Value Storage Layer </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.virtual_chunked (Python function) — Creates a TensorStore where the content is read/written chunk-wise by an arbitrary function.">virtual_chunked</span> </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#parameters class=md-nav__link> Parameters </a> <nav class=md-nav aria-label=Parameters> <ul class=md-nav__list> <li class=md-nav__item> <a href=#p-read_function class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests.">read_function</span> </a> </li> <li class=md-nav__item> <a href=#p-write_function class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests.">write_function</span> </a> </li> <li class=md-nav__item> <a href=#p-loop class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or
write_function if they are
async functions.">loop</span> </a> </li> <li class=md-nav__item> <a href=#p-rank class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.rank (Python parameter) — Constrains the rank of the TensorStore.">rank</span> </a> </li> <li class=md-nav__item> <a href=#p-dtype class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.dtype (Python parameter) — Constrains the data type of the TensorStore.">dtype</span> </a> </li> <li class=md-nav__item> <a href=#p-domain class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.domain (Python parameter) — Constrains the domain of the TensorStore.">domain</span> </a> </li> <li class=md-nav__item> <a href=#p-shape class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.shape (Python parameter) — Constrains the shape and origin of the TensorStore.">shape</span> </a> </li> <li class=md-nav__item> <a href=#p-chunk_layout class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.chunk_layout (Python parameter) — Constrains the chunk layout.">chunk_layout</span> </a> </li> <li class=md-nav__item> <a href=#p-dimension_units class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.dimension_units (Python parameter) — Specifies the physical units of each dimension of the domain.">dimension_units</span> </a> </li> <li class=md-nav__item> <a href=#p-schema class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.schema (Python parameter) — Additional schema constraints to merge with existing constraints.">schema</span> </a> </li> <li class=md-nav__item> <a href=#p-context class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.context (Python parameter) — Shared resource context.">context</span> </a> </li> <li class=md-nav__item> <a href=#p-transaction class=md-nav__link> <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.transaction (Python parameter) — Transaction to use for opening/creating, and for subsequent operations.">transaction</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#caching class=md-nav__link> Caching </a> </li> <li class=md-nav__item> <a href=#pickle-support class=md-nav__link> Pickle support </a> </li> <li class=md-nav__item> <a href=#transaction-support class=md-nav__link> Transaction support </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset" role=main> <dl class="py function objdesc"> <dt class="sig sig-object py sig-wrap"> <em class=property> </em><span class="sig-prename descclassname"><span class=pre>tensorstore.</span></span><span class="sig-name descname"><span class=pre>virtual_chunked</span></span><span class=sig-paren>(</span><em class=sig-param><a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><span class=n><span class=pre>read_function</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Callable title="(in Python v3.9)"><span class=pre>Callable</span></a><span class=p><span class=pre>[</span></span><span class=p><span class=pre>[</span></span><a class="reference internal" href=tensorstore.IndexDomain.html title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space."><span class=pre>IndexDomain</span></a><span class=p><span class=pre>,</span> </span><a class="reference external" href=https://numpy.org/doc/stable/glossary.html#term-array-like title="(in NumPy v1.19)"><span class=pre>array_like</span></a><span class=p><span class=pre>,</span> </span><a class="reference internal" href=tensorstore.VirtualChunkedReadParameters.html title="tensorstore.VirtualChunkedReadParameters (Python class) — Options passed to read callbacks used with virtual_chunked."><span class=pre>VirtualChunkedReadParameters</span></a><span class=p><span class=pre>]</span></span><span class=p><span class=pre>,</span> </span><a class="reference internal" href=tensorstore.FutureLike.html title="tensorstore.FutureLike (Python class) — Abstract base class for types representing an asynchronous result."><span class=pre>FutureLike</span></a><span class=p><span class=pre>[</span></span><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Optional title="(in Python v3.9)"><span class=pre>Optional</span></a><span class=p><span class=pre>[</span></span><a class="reference internal" href=tensorstore.KvStore.TimestampedStorageGeneration.html title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp."><span class=pre>KvStore.TimestampedStorageGeneration</span></a><span class=p><span class=pre>]</span></span><span class=p><span class=pre>]</span></span><span class=p><span class=pre>]</span></span> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em>, <em class=sig-param><a class="reference internal" href=#p-write_function title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><span class=n><span class=pre>write_function</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Callable title="(in Python v3.9)"><span class=pre>Callable</span></a><span class=p><span class=pre>[</span></span><span class=p><span class=pre>[</span></span><a class="reference internal" href=tensorstore.IndexDomain.html title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space."><span class=pre>IndexDomain</span></a><span class=p><span class=pre>,</span> </span><a class="reference external" href=https://numpy.org/doc/stable/glossary.html#term-array-like title="(in NumPy v1.19)"><span class=pre>array_like</span></a><span class=p><span class=pre>,</span> </span><a class="reference internal" href=tensorstore.VirtualChunkedWriteParameters.html title="tensorstore.VirtualChunkedWriteParameters (Python class) — Options passed to write callbacks used with virtual_chunked."><span class=pre>VirtualChunkedWriteParameters</span></a><span class=p><span class=pre>]</span></span><span class=p><span class=pre>,</span> </span><a class="reference internal" href=tensorstore.FutureLike.html title="tensorstore.FutureLike (Python class) — Abstract base class for types representing an asynchronous result."><span class=pre>FutureLike</span></a><span class=p><span class=pre>[</span></span><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Optional title="(in Python v3.9)"><span class=pre>Optional</span></a><span class=p><span class=pre>[</span></span><a class="reference internal" href=tensorstore.KvStore.TimestampedStorageGeneration.html title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp."><span class=pre>KvStore.TimestampedStorageGeneration</span></a><span class=p><span class=pre>]</span></span><span class=p><span class=pre>]</span></span><span class=p><span class=pre>]</span></span> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em>, <em class=sig-param><span class=o><span class=pre>*</span></span></em>, <em class=sig-param><a class="reference internal" href=#p-loop title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions."><span class=n><span class=pre>loop</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.AbstractEventLoop title="(in Python v3.9)"><span class=pre>asyncio.AbstractEventLoop</span></a> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em>, <em class=sig-param><a class="reference internal" href=#p-rank title="tensorstore.virtual_chunked.rank (Python parameter) — Constrains the rank of the TensorStore."><span class=n><span class=pre>rank</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/functions.html#int title="(in Python v3.9)"><span class=pre>int</span></a> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em>, <em class=sig-param><a class="reference internal" href=#p-dtype title="tensorstore.virtual_chunked.dtype (Python parameter) — Constrains the data type of the TensorStore."><span class=n><span class=pre>dtype</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference internal" href=tensorstore.dtype.html title="tensorstore.dtype (Python class) — TensorStore data type representation."><span class=pre>dtype</span></a> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em>, <em class=sig-param><a class="reference internal" href=#p-domain title="tensorstore.virtual_chunked.domain (Python parameter) — Constrains the domain of the TensorStore."><span class=n><span class=pre>domain</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference internal" href=tensorstore.IndexDomain.html title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space."><span class=pre>IndexDomain</span></a> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em>, <em class=sig-param><a class="reference internal" href=#p-shape title="tensorstore.virtual_chunked.shape (Python parameter) — Constrains the shape and origin of the TensorStore."><span class=n><span class=pre>shape</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Sequence title="(in Python v3.9)"><span class=pre>Sequence</span></a><span class=p><span class=pre>[</span></span><a class="reference external" href=https://docs.python.org/3/library/functions.html#int title="(in Python v3.9)"><span class=pre>int</span></a><span class=p><span class=pre>]</span></span> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em>, <em class=sig-param><a class="reference internal" href=#p-chunk_layout title="tensorstore.virtual_chunked.chunk_layout (Python parameter) — Constrains the chunk layout."><span class=n><span class=pre>chunk_layout</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference internal" href=tensorstore.ChunkLayout.html title="tensorstore.ChunkLayout (Python class) — Describes the storage layout of a tensorstore.TensorStore."><span class=pre>ChunkLayout</span></a> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em>, <em class=sig-param><a class="reference internal" href=#p-dimension_units title="tensorstore.virtual_chunked.dimension_units (Python parameter) — Specifies the physical units of each dimension of the domain."><span class=n><span class=pre>dimension_units</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Sequence title="(in Python v3.9)"><span class=pre>Sequence</span></a><span class=p><span class=pre>[</span></span><a class="reference internal" href=tensorstore.Unit.html title="tensorstore.Unit (Python class) — Specifies a physical quantity/unit."><span class=pre>Unit</span></a> <span class=p><span class=pre>|</span></span> <a class="reference external" href=https://docs.python.org/3/library/stdtypes.html#str title="(in Python v3.9)"><span class=pre>str</span></a> <span class=p><span class=pre>|</span></span> <a class="reference external" href=https://docs.python.org/3/library/numbers.html#numbers.Real title="(in Python v3.9)"><span class=pre>Real</span></a> <span class=p><span class=pre>|</span></span> <a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Tuple title="(in Python v3.9)"><span class=pre>Tuple</span></a><span class=p><span class=pre>[</span></span><a class="reference external" href=https://docs.python.org/3/library/numbers.html#numbers.Real title="(in Python v3.9)"><span class=pre>Real</span></a><span class=p><span class=pre>,</span> </span><a class="reference external" href=https://docs.python.org/3/library/stdtypes.html#str title="(in Python v3.9)"><span class=pre>str</span></a><span class=p><span class=pre>]</span></span> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code><span class=p><span class=pre>]</span></span> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em>, <em class=sig-param><a class="reference internal" href=#p-schema title="tensorstore.virtual_chunked.schema (Python parameter) — Additional schema constraints to merge with existing constraints."><span class=n><span class=pre>schema</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference internal" href=tensorstore.Schema.html title="tensorstore.Schema (Python class) — Driver-independent options for defining a TensorStore schema."><span class=pre>Schema</span></a> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em>, <em class=sig-param><a class="reference internal" href=#p-context title="tensorstore.virtual_chunked.context (Python parameter) — Shared resource context."><span class=n><span class=pre>context</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference internal" href=tensorstore.Context.html title="tensorstore.Context (Python class) — Manages shared TensorStore context resources, such as caches and credentials."><span class=pre>Context</span></a> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em>, <em class=sig-param><a class="reference internal" href=#p-transaction title="tensorstore.virtual_chunked.transaction (Python parameter) — Transaction to use for opening/creating, and for subsequent operations."><span class=n><span class=pre>transaction</span></span></a><span class=p><span class=pre>:</span></span> <span class=n><span class=desctype><a class="reference internal" href=tensorstore.Transaction.html title="tensorstore.Transaction (Python class) — Transactions are used to stage a group of modifications (e.g. writes to tensorstore.TensorStore objects) in memory, and then either commit the group all at once or abort it."><span class=pre>Transaction</span></a> <span class=p><span class=pre>|</span></span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span> <span class=o><span class=pre>=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class=kc>None</span></code></em><span class=sig-paren>)</span> <span class=sig-return><span class=sig-return-icon>&#x2192;</span> <span class=sig-return-typehint><span class=desctype><a class="reference internal" href=tensorstore.TensorStore.html title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><span class=pre>TensorStore</span></a></span></span></span></dt> <dd><p>Creates a <a class="reference internal" href=tensorstore.TensorStore.html title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><code class="xref py py-obj docutils literal notranslate"><span class=pre>TensorStore</span></code></a> where the content is read/written chunk-wise by an arbitrary function.</p> <p>Example (read-only):</p> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>a</span> <span class=o>=</span> <span class=n>ts</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>]],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>ts</span><span class=o>.</span><span class=n>uint32</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>async</span> <span class=k>def</span> <span class=nf>do_read</span><span class=p>(</span><span class=n>domain</span><span class=p>:</span> <span class=n>ts</span><span class=o>.</span><span class=n>IndexDomain</span><span class=p>,</span> <span class=n>array</span><span class=p>:</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span>
<span class=gp>... </span>                  <span class=n>read_params</span><span class=p>:</span> <span class=n>ts</span><span class=o>.</span><span class=n>VirtualChunkedReadParameters</span><span class=p>):</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Computing content for: </span><span class=si>{</span><span class=n>domain</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>array</span><span class=p>[</span><span class=o>...</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=k>await</span> <span class=n>a</span><span class=p>[</span><span class=n>domain</span><span class=p>]</span><span class=o>.</span><span class=n>read</span><span class=p>())</span> <span class=o>+</span> <span class=mi>100</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>t</span> <span class=o>=</span> <span class=n>ts</span><span class=o>.</span><span class=n>virtual_chunked</span><span class=p>(</span><span class=n>do_read</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>a</span><span class=o>.</span><span class=n>dtype</span><span class=p>,</span> <span class=n>domain</span><span class=o>=</span><span class=n>a</span><span class=o>.</span><span class=n>domain</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>await</span> <span class=n>t</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
<span class=go>Computing content for: { [0, 2), [0, 3) }</span>
<span class=go>array([[101, 102, 103],</span>
<span class=go>       [104, 105, 106]], dtype=uint32)</span>
</code></pre></div> </div> <p>Example (read/write):</p> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>array</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>zeros</span><span class=p>(</span><span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>uint32</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>array</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>50</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>do_read</span><span class=p>(</span><span class=n>domain</span><span class=p>,</span> <span class=n>chunk</span><span class=p>,</span> <span class=n>read_context</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>chunk</span><span class=p>[</span><span class=o>...</span><span class=p>]</span> <span class=o>=</span> <span class=n>array</span><span class=p>[</span><span class=n>domain</span><span class=o>.</span><span class=n>index_exp</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>do_write</span><span class=p>(</span><span class=n>domain</span><span class=p>,</span> <span class=n>chunk</span><span class=p>,</span> <span class=n>write_context</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>array</span><span class=p>[</span><span class=n>domain</span><span class=o>.</span><span class=n>index_exp</span><span class=p>]</span> <span class=o>=</span> <span class=n>chunk</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>t</span> <span class=o>=</span> <span class=n>ts</span><span class=o>.</span><span class=n>virtual_chunked</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>do_read</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>do_write</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>dtype</span><span class=o>=</span><span class=n>array</span><span class=o>.</span><span class=n>dtype</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>shape</span><span class=o>=</span><span class=n>array</span><span class=o>.</span><span class=n>shape</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>chunk_layout</span><span class=o>=</span><span class=n>ts</span><span class=o>.</span><span class=n>ChunkLayout</span><span class=p>(</span><span class=n>read_chunk_shape</span><span class=o>=</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>await</span> <span class=n>t</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
<span class=go>array([[ 0,  0,  0,  0,  0],</span>
<span class=go>       [50, 50, 50, 50, 50],</span>
<span class=go>       [ 0,  0,  0,  0,  0],</span>
<span class=go>       [ 0,  0,  0,  0,  0]], dtype=uint32)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>t</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>]</span> <span class=o>=</span> <span class=mi>42</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>array</span>
<span class=go>array([[ 0,  0,  0,  0,  0],</span>
<span class=go>       [50, 42, 42, 50, 50],</span>
<span class=go>       [ 0, 42, 42,  0,  0],</span>
<span class=go>       [ 0,  0,  0,  0,  0]], dtype=uint32)</span>
</code></pre></div> </div> <dl class="field-list simple"> <dt class=field-odd id=parameters>Parameters<a class=headerlink href=#parameters title="Permalink to this headline">¶</a></dt> <dd class=field-odd><dl class="api-field simple"> <dt id=p-read_function><span class="sig-name descname">read_function</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Callable title="(in Python v3.9)">Callable</a><span class=p>[</span><span class=p>[</span><a class="reference internal" href=tensorstore.IndexDomain.html title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space.">IndexDomain</a><span class=p>, </span><a class="reference external" href=https://numpy.org/doc/stable/glossary.html#term-array-like title="(in NumPy v1.19)">array_like</a><span class=p>, </span><a class="reference internal" href=tensorstore.VirtualChunkedReadParameters.html title="tensorstore.VirtualChunkedReadParameters (Python class) — Options passed to read callbacks used with virtual_chunked.">VirtualChunkedReadParameters</a><span class=p>]</span><span class=p>, </span><a class="reference internal" href=tensorstore.FutureLike.html title="tensorstore.FutureLike (Python class) — Abstract base class for types representing an asynchronous result.">FutureLike</a><span class=p>[</span><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Optional title="(in Python v3.9)">Optional</a><span class=p>[</span><a class="reference internal" href=tensorstore.KvStore.TimestampedStorageGeneration.html title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp.">KvStore.TimestampedStorageGeneration</a><span class=p>]</span><span class=p>]</span><span class=p>]</span> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-read_function title="Permalink to this definition">¶</a></dt><dd><p><p>Callback that handles chunk read requests. Must be specified to create a virtual view that supports reads. To create a write-only view, leave this unspecified (as <a class="reference external" href=https://docs.python.org/3/library/constants.html#None title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>).</p> <p>This function should assign to the array the content for the specified <a class="reference internal" href=tensorstore.IndexDomain.html title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space."><code class="xref py py-obj docutils literal notranslate"><span class=pre>IndexDomain</span></code></a>.</p> <p>The returned <a class="reference internal" href=tensorstore.KvStore.TimestampedStorageGeneration.html title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp."><code class="xref py py-obj docutils literal notranslate"><span class=pre>TimestampedStorageGeneration</span></code></a> identifies the version of the content, for caching purposes. If versioning is not applicable, <a class="reference external" href=https://docs.python.org/3/library/constants.html#None title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a> may be returned to indicate a value that may be cached indefinitely.</p> <p>If it returns a <a class="reference external" href=https://docs.python.org/3/reference/compound_stmts.html#async title="(in Python v3.9)"><span class="xref std std-ref">coroutine</span></a>, the coroutine will be executed using the event loop indicated by <a class="reference internal" href=#p-loop title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions."><code class="xref py py-param docutils literal notranslate"><span class=pre>loop</span></code></a>.</p> </p> </dd> <dt id=p-write_function><span class="sig-name descname">write_function</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Callable title="(in Python v3.9)">Callable</a><span class=p>[</span><span class=p>[</span><a class="reference internal" href=tensorstore.IndexDomain.html title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space.">IndexDomain</a><span class=p>, </span><a class="reference external" href=https://numpy.org/doc/stable/glossary.html#term-array-like title="(in NumPy v1.19)">array_like</a><span class=p>, </span><a class="reference internal" href=tensorstore.VirtualChunkedWriteParameters.html title="tensorstore.VirtualChunkedWriteParameters (Python class) — Options passed to write callbacks used with virtual_chunked.">VirtualChunkedWriteParameters</a><span class=p>]</span><span class=p>, </span><a class="reference internal" href=tensorstore.FutureLike.html title="tensorstore.FutureLike (Python class) — Abstract base class for types representing an asynchronous result.">FutureLike</a><span class=p>[</span><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Optional title="(in Python v3.9)">Optional</a><span class=p>[</span><a class="reference internal" href=tensorstore.KvStore.TimestampedStorageGeneration.html title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp.">KvStore.TimestampedStorageGeneration</a><span class=p>]</span><span class=p>]</span><span class=p>]</span> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-write_function title="Permalink to this definition">¶</a></dt><dd><p><p>Callback that handles chunk write requests. Must be specified to create a virtual view that supports writes. To create a read-only view, leave this unspecified (as <a class="reference external" href=https://docs.python.org/3/library/constants.html#None title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>).</p> <p>This function store the content of the array for the specified <a class="reference internal" href=tensorstore.IndexDomain.html title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space."><code class="xref py py-obj docutils literal notranslate"><span class=pre>IndexDomain</span></code></a>.</p> <p>The returned <a class="reference internal" href=tensorstore.KvStore.TimestampedStorageGeneration.html title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp."><code class="xref py py-obj docutils literal notranslate"><span class=pre>TimestampedStorageGeneration</span></code></a> identifies the stored version of the content, for caching purposes. If versioning is not applicable, <a class="reference external" href=https://docs.python.org/3/library/constants.html#None title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a> may be returned to indicate a value that may be cached indefinitely.</p> <p>If it returns a <a class="reference external" href=https://docs.python.org/3/reference/compound_stmts.html#async title="(in Python v3.9)"><span class="xref std std-ref">coroutine</span></a>, the coroutine will be executed using the event loop indicated by <a class="reference internal" href=#p-loop title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions."><code class="xref py py-param docutils literal notranslate"><span class=pre>loop</span></code></a>.</p> </p> </dd> <dt id=p-loop><span class="sig-name descname">loop</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.AbstractEventLoop title="(in Python v3.9)">asyncio.AbstractEventLoop</a> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-loop title="Permalink to this definition">¶</a></dt><dd><p>Event loop on which to execute <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> and/or <a class="reference internal" href=#p-write_function title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>write_function</span></code></a> if they are <a class="reference external" href=https://docs.python.org/3/reference/compound_stmts.html#async-def title="(in Python v3.9)"><span class="xref std std-ref">async functions</span></a>. If not specified (or <a class="reference external" href=https://docs.python.org/3/library/constants.html#None title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a> is specified), defaults to the loop returned by <a class="reference external" href=https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.get_running_loop title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class=pre>asyncio.get_running_loop</span></code></a> (in the context of the call to <a class="reference internal" href=# title="tensorstore.virtual_chunked (Python function) — Creates a TensorStore where the content is read/written chunk-wise by an arbitrary function."><code class="xref py py-obj docutils literal notranslate"><span class=pre>virtual_chunked</span></code></a>). If <a class="reference internal" href=#p-loop title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions."><code class="xref py py-param docutils literal notranslate"><span class=pre>loop</span></code></a> is not specified and there is no running event loop, it is an error for <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> or <a class="reference internal" href=#p-write_function title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>write_function</span></code></a> to return a coroutine.</p> </dd> <dt id=p-rank><span class="sig-name descname">rank</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/functions.html#int title="(in Python v3.9)">int</a> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-rank title="Permalink to this definition">¶</a></dt><dd><p>Constrains the rank of the TensorStore. If there is an index transform, the rank constraint must match the rank of the <em>input</em> space.</p> </dd> <dt id=p-dtype><span class="sig-name descname">dtype</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference internal" href=tensorstore.dtype.html title="tensorstore.dtype (Python class) — TensorStore data type representation.">dtype</a> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-dtype title="Permalink to this definition">¶</a></dt><dd><p>Constrains the data type of the TensorStore. If a data type has already been set, it is an error to specify a different data type.</p> </dd> <dt id=p-domain><span class="sig-name descname">domain</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference internal" href=tensorstore.IndexDomain.html title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space.">IndexDomain</a> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-domain title="Permalink to this definition">¶</a></dt><dd><p><p>Constrains the domain of the TensorStore. If there is an existing domain, the specified domain is merged with it as follows:</p> <ol class="arabic simple"> <li><p>The rank must match the existing rank.</p></li> <li><p>All bounds must match, except that a finite or explicit bound is permitted to match an infinite and implicit bound, and takes precedence.</p></li> <li><p>If both the new and existing domain specify non-empty labels for a dimension, the labels must be equal. If only one of the domains specifies a non-empty label for a dimension, the non-empty label takes precedence.</p></li> </ol> <p>Note that if there is an index transform, the domain must match the <em>input</em> space, not the output space.</p> </p> </dd> <dt id=p-shape><span class="sig-name descname">shape</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Sequence title="(in Python v3.9)">Sequence</a><span class=p>[</span><a class="reference external" href=https://docs.python.org/3/library/functions.html#int title="(in Python v3.9)">int</a><span class=p>]</span> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-shape title="Permalink to this definition">¶</a></dt><dd><p><p>Constrains the shape and origin of the TensorStore. Equivalent to specifying a <a class="reference internal" href=#p-domain title="tensorstore.virtual_chunked.domain (Python parameter) — Constrains the domain of the TensorStore."><code class="xref py py-param docutils literal notranslate"><span class=pre>domain</span></code></a> of <code class="code highlight python docutils literal highlight-python"><span class=n>ts</span><span class=o>.</span><span class=n>IndexDomain</span><span class=p>(</span><span class=n>shape</span><span class=o>=</span><span class=n>shape</span><span class=p>)</span></code>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>This option also constrains the origin of all dimensions to be zero.</p> </div> </p> </dd> <dt id=p-chunk_layout><span class="sig-name descname">chunk_layout</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference internal" href=tensorstore.ChunkLayout.html title="tensorstore.ChunkLayout (Python class) — Describes the storage layout of a tensorstore.TensorStore.">ChunkLayout</a> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-chunk_layout title="Permalink to this definition">¶</a></dt><dd><p>Constrains the chunk layout. If there is an existing chunk layout constraint, the constraints are merged. If the constraints are incompatible, an error is raised.</p> </dd> <dt id=p-dimension_units><span class="sig-name descname">dimension_units</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Sequence title="(in Python v3.9)">Sequence</a><span class=p>[</span><a class="reference internal" href=tensorstore.Unit.html title="tensorstore.Unit (Python class) — Specifies a physical quantity/unit.">Unit</a> <span class=p>|</span> <a class="reference external" href=https://docs.python.org/3/library/stdtypes.html#str title="(in Python v3.9)">str</a> <span class=p>|</span> <a class="reference external" href=https://docs.python.org/3/library/numbers.html#numbers.Real title="(in Python v3.9)">Real</a> <span class=p>|</span> <a class="reference external" href=https://docs.python.org/3/library/typing.html#typing.Tuple title="(in Python v3.9)">Tuple</a><span class=p>[</span><a class="reference external" href=https://docs.python.org/3/library/numbers.html#numbers.Real title="(in Python v3.9)">Real</a><span class=p>, </span><a class="reference external" href=https://docs.python.org/3/library/stdtypes.html#str title="(in Python v3.9)">str</a><span class=p>]</span> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code><span class=p>]</span> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-dimension_units title="Permalink to this definition">¶</a></dt><dd><p><p>Specifies the physical units of each dimension of the domain.</p> <p>The <em>physical unit</em> for a dimension is the physical quantity corresponding to a single index increment along each dimension.</p> <p>A value of <code class="code highlight python docutils literal highlight-python"><span class=kc>None</span></code> indicates that the unit is unknown. A dimension-less quantity can be indicated by a unit of <code class="code highlight python docutils literal highlight-python"><span class=s2>&quot;&quot;</span></code>.</p> </p> </dd> <dt id=p-schema><span class="sig-name descname">schema</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference internal" href=tensorstore.Schema.html title="tensorstore.Schema (Python class) — Driver-independent options for defining a TensorStore schema.">Schema</a> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-schema title="Permalink to this definition">¶</a></dt><dd><p>Additional schema constraints to merge with existing constraints.</p> </dd> <dt id=p-context><span class="sig-name descname">context</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference internal" href=tensorstore.Context.html title="tensorstore.Context (Python class) — Manages shared TensorStore context resources, such as caches and credentials.">Context</a> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-context title="Permalink to this definition">¶</a></dt><dd><p>Shared resource context. Defaults to a new (unshared) context with default options, as returned by <a class="reference internal" href=tensorstore.Context.html title="tensorstore.Context (Python class) — Manages shared TensorStore context resources, such as caches and credentials."><code class="xref py py-meth docutils literal notranslate"><span class=pre>tensorstore.Context()</span></code></a>. To share resources, such as cache pools, between multiple open TensorStores, you must specify a context.</p> </dd> <dt id=p-transaction><span class="sig-name descname">transaction</span><span class=p> : </span><span class=desctype><span class=desctype><a class="reference internal" href=tensorstore.Transaction.html title="tensorstore.Transaction (Python class) — Transactions are used to stage a group of modifications (e.g. writes to tensorstore.TensorStore objects) in memory, and then either commit the group all at once or abort it.">Transaction</a> <span class=p>|</span> <code class="code python docutils literal highlight highlight-python"><span class=kc>None</span></code></span></span><a class=headerlink href=#p-transaction title="Permalink to this definition">¶</a></dt><dd><p><p>Transaction to use for opening/creating, and for subsequent operations. By default, the open is non-transactional.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>To perform transactional operations using a TensorStore that was previously opened without a transaction, use <a class="reference internal" href=tensorstore.TensorStore.with_transaction.html title="tensorstore.TensorStore.with_transaction (Python method) — Returns a transaction-bound view of this TensorStore."><code class="xref py py-obj docutils literal notranslate"><span class=pre>TensorStore.with_transaction</span></code></a>.</p> </div> </p> </dd> </dl> </dd> </dl> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Neither <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> nor <a class="reference internal" href=#p-write_function title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>write_function</span></code></a> should block synchronously while waiting for another TensorStore operation; blocking on another operation that uses the same <a class="reference internal" href=../../context.html#json-Context.data_copy_concurrency title="Context.data_copy_concurrency (JSON type)"><code class="xref json json-schema docutils literal notranslate"><span class=pre>Context.data_copy_concurrency</span></code></a> resource may result in deadlock. Instead, it is better to specify a <a class="reference external" href=https://docs.python.org/3/reference/compound_stmts.html#async-def title="(in Python v3.9)"><span class="xref std std-ref">coroutine function</span></a> for <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> and <a class="reference internal" href=#p-write_function title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>write_function</span></code></a> and use <a class="reference external" href=https://docs.python.org/3/reference/expressions.html#await title="(in Python v3.9)"><span class="xref std std-ref">await</span></a> to wait for the result of other TensorStore operations.</p> </div> <h2 id=caching>Caching<a class=headerlink href=#caching title="Permalink to this headline">¶</a></h2> <p>By default, the computed content of chunks is not cached, and will be recomputed on every read. To enable caching:</p> <ul class=simple> <li><p>Specify a <a class="reference internal" href=tensorstore.Context.html title="tensorstore.Context (Python class) — Manages shared TensorStore context resources, such as caches and credentials."><code class="xref py py-obj docutils literal notranslate"><span class=pre>Context</span></code></a> that contains a <a class="reference internal" href=../../context.html#json-Context.cache_pool title="Context.cache_pool (JSON type)"><code class="xref json json-schema docutils literal notranslate"><span class=pre>cache_pool</span></code></a> with a non-zero size limit, e.g.: <code class="code highlight json docutils literal highlight-json"><span class=p>{</span><span class=nt>&quot;cache_pool&quot;</span><span class=p>:</span> <span class=p>{</span><span class=nt>&quot;total_bytes_limit&quot;</span><span class=p>:</span> <span class=mi>100000000</span><span class=p>}}</span></code> for 100MB.</p></li> <li><p>Additionally, if the data is not immutable, the <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> should return a unique generation and a timestamp that is not <code class="code highlight python docutils literal highlight-python"><span class=nb>float</span><span class=p>(</span><span class=s1>&#39;inf&#39;</span><span class=p>)</span></code>. When a cached chunk is re-read, the <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> will be called with <a class="reference internal" href=tensorstore.VirtualChunkedReadParameters.if_not_equal.html title="tensorstore.VirtualChunkedReadParameters.if_not_equal (Python property) — Cached generation, read request can be skipped if no newer data is available."><code class="xref py py-obj docutils literal notranslate"><span class=pre>if_not_equal</span></code></a> specified. If the generation specified by <a class="reference internal" href=tensorstore.VirtualChunkedReadParameters.if_not_equal.html title="tensorstore.VirtualChunkedReadParameters.if_not_equal (Python property) — Cached generation, read request can be skipped if no newer data is available."><code class="xref py py-obj docutils literal notranslate"><span class=pre>if_not_equal</span></code></a> is still current, the <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> may leave the output array unmodified and return a <a class="reference internal" href=tensorstore.KvStore.TimestampedStorageGeneration.html title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp."><code class="xref py py-obj docutils literal notranslate"><span class=pre>TimestampedStorageGeneration</span></code></a> with an appropriate <a class="reference internal" href=tensorstore.KvStore.TimestampedStorageGeneration.time.html title="tensorstore.KvStore.TimestampedStorageGeneration.time (Python property) — Time (seconds since Unix epoch) at which generation is valid."><code class="xref py py-obj docutils literal notranslate"><span class=pre>time</span></code></a> but <a class="reference internal" href=tensorstore.KvStore.TimestampedStorageGeneration.generation.html title="tensorstore.KvStore.TimestampedStorageGeneration.generation (Python property) — Identifies a specific version of a key-value store entry."><code class="xref py py-obj docutils literal notranslate"><span class=pre>generation</span></code></a> left unspecified.</p></li> </ul> <h2 id=pickle-support>Pickle support<a class=headerlink href=#pickle-support title="Permalink to this headline">¶</a></h2> <p>The returned <a class="reference internal" href=tensorstore.TensorStore.html title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><code class="xref py py-obj docutils literal notranslate"><span class=pre>TensorStore</span></code></a> supports pickling if, and only if, the <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> and <a class="reference internal" href=#p-write_function title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>write_function</span></code></a> support pickling.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The <a class="reference external" href=https://docs.python.org/3/library/pickle.html#module-pickle title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class=pre>pickle</span></code></a> module only supports global functions defined in named modules. For broader function support, you may wish to use <a class="reference external" href=https://github.com/cloudpipe/cloudpickle>cloudpickle</a>.</p> </div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>The specified <a class="reference internal" href=#p-loop title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions."><code class="xref py py-param docutils literal notranslate"><span class=pre>loop</span></code></a> is not preserved when the returned <a class="reference internal" href=tensorstore.TensorStore.html title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><code class="xref py py-obj docutils literal notranslate"><span class=pre>TensorStore</span></code></a> is pickled, since it is a property of the current thread. Instead, when unpickled, the resultant <a class="reference internal" href=tensorstore.TensorStore.html title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><code class="xref py py-obj docutils literal notranslate"><span class=pre>TensorStore</span></code></a> will use the running event loop (as returned by <a class="reference external" href=https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.get_running_loop title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class=pre>asyncio.get_running_loop</span></code></a>) of the thread used for unpickling, if there is one.</p> </div> <h2 id=transaction-support>Transaction support<a class=headerlink href=#transaction-support title="Permalink to this headline">¶</a></h2> <p>Transactional reads and writes are supported on virtual_chunked views. A transactional write simply serves to buffer the write in memory until it is committed. Transactional reads will observe prior writes made using the same transaction. However, when the transaction commit is initiated, the <a class="reference internal" href=#p-write_function title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>write_function</span></code></a> is called in exactly the same way as for a non-transactional write, and if more than one chunk is affected, the commit will be non-atomic. If the transaction is atomic, it is an error to write to more than one chunk in the same transaction.</p> <p>You are also free to use transactional operations, e.g. operations on a <a class="reference internal" href=tensorstore.KvStore.html title="tensorstore.KvStore (Python class) — Key-value store that maps an ordered set of byte string keys to byte string values."><code class="xref py py-class docutils literal notranslate"><span class=pre>KvStore</span></code></a> or another <a class="reference internal" href=tensorstore.TensorStore.html title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><code class="xref py py-class docutils literal notranslate"><span class=pre>TensorStore</span></code></a>, within the <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> or <a class="reference internal" href=#p-write_function title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>write_function</span></code></a>.</p> <ul class=simple> <li><p>For read-write views, you should not attempt to use the same transaction within the <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> or <a class="reference internal" href=#p-write_function title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>write_function</span></code></a> that is also used for read or write operations on the virtual view directly, because both <a class="reference internal" href=#p-write_function title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>write_function</span></code></a> and <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> may be called after the commit starts, and any attempt to perform new operations using the same transaction once it is already being committed will fail; instead, any transactional operations performed within the <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> or <a class="reference internal" href=#p-write_function title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>write_function</span></code></a> should use a different transaction.</p></li> <li><p>For read-only views, it is possible to use the same transaction within the <a class="reference internal" href=#p-read_function title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class=pre>read_function</span></code></a> as is also used for read operations on the virtual view directly, though this may not be particularly useful.</p></li> </ul> <p>Specifying a transaction directly when creating the virtual chunked view is no different than binding the transaction to an existing virtual chunked view.</p> </dd></dl> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-up width=24 height=24 viewbox="0 0 24 24"><path d=M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z /></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=tensorstore.VirtualChunkedWriteParameters.if_equal.html class="md-footer__link md-footer__link--prev" aria-label="Previous: tensorstore.VirtualChunkedWriteParameters.if_equal" rel=prev> <div class="md-footer__button md-icon"> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-left width=24 height=24 viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> tensorstore.VirtualChunkedWriteParameters.if_equal </div> </div> </a> <a href=../../installation.html class="md-footer__link md-footer__link--next" aria-label="Next: Building and Installing" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Building and Installing </div> </div> <div class="md-footer__button md-icon"> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-right width=24 height=24 viewbox="0 0 24 24"><path d=M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z /></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.expand", "navigation.sections", "navigation.top"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=../../_static/javascripts/bundle.js></script> <script data-url_root=../../ id=documentation_options src=../../_static/documentation_options.js></script> </body> </html>